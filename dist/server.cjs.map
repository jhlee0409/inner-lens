{"version":3,"sources":["../src/utils/masking.ts","../src/server.ts"],"names":["z","Octokit"],"mappings":";;;;;;;;AAcA,IAAM,gBAAA,GAAqC;AAAA;AAAA,EAEzC;AAAA,IACE,IAAA,EAAM,OAAA;AAAA,IACN,OAAA,EAAS,gCAAA;AAAA,IACT,WAAA,EAAa;AAAA,GACf;AAAA;AAAA,EAEA;AAAA,IACE,IAAA,EAAM,cAAA;AAAA,IACN,OAAA,EAAS,kCAAA;AAAA,IACT,WAAA,EAAa;AAAA,GACf;AAAA;AAAA,EAEA;AAAA,IACE,IAAA,EAAM,eAAA;AAAA,IACN,OAAA,EAAS,6EAAA;AAAA,IACT,WAAA,EAAa;AAAA,GACf;AAAA;AAAA,EAEA;AAAA,IACE,IAAA,EAAM,aAAA;AAAA,IACN,OAAA,EAAS,kFAAA;AAAA,IACT,WAAA,EAAa;AAAA,GACf;AAAA;AAAA,EAEA;AAAA,IACE,IAAA,EAAM,aAAA;AAAA,IACN,OAAA,EAAS,yHAAA;AAAA,IACT,WAAA,EAAa;AAAA,GACf;AAAA;AAAA,EAEA;AAAA,IACE,IAAA,EAAM,uBAAA;AAAA,IACN,OAAA,EAAS,8BAAA;AAAA,IACT,WAAA,EAAa;AAAA,GACf;AAAA;AAAA,EAEA;AAAA,IACE,IAAA,EAAM,KAAA;AAAA,IACN,OAAA,EAAS,kCAAA;AAAA,IACT,WAAA,EAAa;AAAA,GACf;AAAA;AAAA,EAEA;AAAA,IACE,IAAA,EAAM,OAAA;AAAA,IACN,OAAA,EAAS,wEAAA;AAAA,IACT,WAAA,EAAa;AAAA,GACf;AAAA;AAAA,EAEA;AAAA,IACE,IAAA,EAAM,MAAA;AAAA,IACN,OAAA,EAAS,gGAAA;AAAA,IACT,WAAA,EAAa;AAAA,GACf;AAAA;AAAA,EAEA;AAAA,IACE,IAAA,EAAM,MAAA;AAAA,IACN,OAAA,EAAS,sJAAA;AAAA,IACT,WAAA,EAAa;AAAA,GACf;AAAA;AAAA,EAEA;AAAA,IACE,IAAA,EAAM,SAAA;AAAA,IACN,OAAA,EAAS,sCAAA;AAAA,IACT,WAAA,EAAa;AAAA,GACf;AAAA;AAAA,EAEA;AAAA,IACE,IAAA,EAAM,YAAA;AAAA,IACN,OAAA,EAAS,sFAAA;AAAA,IACT,WAAA,EAAa;AAAA,GACf;AAAA;AAAA,EAEA;AAAA,IACE,IAAA,EAAM,cAAA;AAAA,IACN,OAAA,EAAS,2CAAA;AAAA,IACT,WAAA,EAAa;AAAA,GACf;AAAA;AAAA,EAEA;AAAA,IACE,IAAA,EAAM,YAAA;AAAA,IACN,OAAA,EAAS,sBAAA;AAAA,IACT,WAAA,EAAa;AAAA,GACf;AAAA;AAAA,EAEA;AAAA,IACE,IAAA,EAAM,eAAA;AAAA,IACN,OAAA,EAAS,4BAAA;AAAA,IACT,WAAA,EAAa;AAAA,GACf;AAAA;AAAA,EAEA;AAAA,IACE,IAAA,EAAM,YAAA;AAAA,IACN,OAAA,EAAS,yBAAA;AAAA,IACT,WAAA,EAAa;AAAA,GACf;AAAA;AAAA,EAEA;AAAA,IACE,IAAA,EAAM,YAAA;AAAA,IACN,OAAA,EAAS,2CAAA;AAAA,IACT,WAAA,EAAa;AAAA,GACf;AAAA;AAAA,EAEA;AAAA,IACE,IAAA,EAAM,KAAA;AAAA,IACN,OAAA,EAAS,8DAAA;AAAA,IACT,WAAA,EAAa;AAAA,GACf;AAAA;AAAA,EAEA;AAAA,IACE,IAAA,EAAM,YAAA;AAAA,IACN,OAAA,EAAS,oFAAA;AAAA,IACT,WAAA,EAAa;AAAA,GACf;AAAA;AAAA,EAEA;AAAA,IACE,IAAA,EAAM,cAAA;AAAA,IACN,OAAA,EAAS,iEAAA;AAAA,IACT,WAAA,EAAa;AAAA,GACf;AAAA;AAAA,EAEA;AAAA,IACE,IAAA,EAAM,aAAA;AAAA,IACN,OAAA,EAAS,qHAAA;AAAA,IACT,WAAA,EAAa;AAAA;AAEjB,CAAA;AAOO,SAAS,kBAAkB,IAAA,EAAsB;AACtD,EAAA,IAAI,CAAC,IAAA,IAAQ,OAAO,IAAA,KAAS,QAAA,EAAU;AACrC,IAAA,OAAO,IAAA;AAAA,EACT;AAEA,EAAA,IAAI,UAAA,GAAa,IAAA;AAEjB,EAAA,KAAA,MAAW,EAAE,OAAA,EAAS,WAAA,EAAY,IAAK,gBAAA,EAAkB;AACvD,IAAA,UAAA,GAAa,UAAA,CAAW,OAAA,CAAQ,OAAA,EAAS,WAAW,CAAA;AAAA,EACtD;AAEA,EAAA,OAAO,UAAA;AACT;AAOO,SAAS,oBAAuB,GAAA,EAAW;AAChD,EAAA,IAAI,GAAA,KAAQ,IAAA,IAAQ,GAAA,KAAQ,MAAA,EAAW;AACrC,IAAA,OAAO,GAAA;AAAA,EACT;AAEA,EAAA,IAAI,OAAO,QAAQ,QAAA,EAAU;AAC3B,IAAA,OAAO,kBAAkB,GAAG,CAAA;AAAA,EAC9B;AAEA,EAAA,IAAI,KAAA,CAAM,OAAA,CAAQ,GAAG,CAAA,EAAG;AACtB,IAAA,OAAO,IAAI,GAAA,CAAI,CAAC,IAAA,KAAS,mBAAA,CAAoB,IAAI,CAAC,CAAA;AAAA,EACpD;AAEA,EAAA,IAAI,OAAO,QAAQ,QAAA,EAAU;AAC3B,IAAA,MAAM,SAAkC,EAAC;AACzC,IAAA,KAAA,MAAW,CAAC,GAAA,EAAK,KAAK,KAAK,MAAA,CAAO,OAAA,CAAQ,GAAG,CAAA,EAAG;AAE9C,MAAA,MAAM,QAAA,GAAW,IAAI,WAAA,EAAY;AACjC,MAAA,IACE,QAAA,CAAS,SAAS,UAAU,CAAA,IAC5B,SAAS,QAAA,CAAS,QAAQ,CAAA,IAC1B,QAAA,CAAS,QAAA,CAAS,OAAO,KACzB,QAAA,CAAS,QAAA,CAAS,QAAQ,CAAA,IAC1B,QAAA,CAAS,QAAA,CAAS,SAAS,CAAA,IAC3B,QAAA,CAAS,QAAA,CAAS,SAAS,CAAA,EAC3B;AACA,QAAA,MAAA,CAAO,GAAG,CAAA,GAAI,YAAA;AAAA,MAChB,CAAA,MAAO;AACL,QAAA,MAAA,CAAO,GAAG,CAAA,GAAI,mBAAA,CAAoB,KAAK,CAAA;AAAA,MACzC;AAAA,IACF;AACA,IAAA,OAAO,MAAA;AAAA,EACT;AAEA,EAAA,OAAO,GAAA;AACT;;;ACzLA,IAAM,gBAAA,GAAmBA,MAAE,MAAA,CAAO;AAAA,EAChC,IAAA,EAAMA,MAAE,IAAA,CAAK;AAAA,IACX,OAAA;AAAA,IACA,UAAA;AAAA,IACA,OAAA;AAAA,IACA,QAAA;AAAA,IACA,OAAA;AAAA,IACA,MAAA;AAAA,IACA,QAAA;AAAA,IACA,SAAA;AAAA,IACA,QAAA;AAAA,IACA,MAAA;AAAA,IACA,OAAA;AAAA,IACA;AAAA,GACD,CAAA;AAAA,EACD,MAAA,EAAQA,MAAE,MAAA,EAAO;AAAA,EACjB,SAAA,EAAWA,MAAE,MAAA,EAAO;AAAA,EACpB,KAAA,EAAOA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,EAC3B,QAAA,EAAUA,MACP,MAAA,CAAO;AAAA,IACN,CAAA,EAAGA,MAAE,MAAA,EAAO;AAAA,IACZ,CAAA,EAAGA,MAAE,MAAA;AAAO,GACb,EACA,QAAA,EAAS;AAAA,EACZ,GAAA,EAAKA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,EACzB,UAAUA,KAAA,CAAE,MAAA,CAAOA,MAAE,OAAA,EAAS,EAAE,QAAA;AAClC,CAAC,CAAA;AAKD,IAAM,qBAAA,GAAwBA,MAAE,MAAA,CAAO;AAAA,EACrC,IAAA,EAAMA,MAAE,IAAA,CAAK;AAAA,IACX,UAAA;AAAA,IACA,WAAA;AAAA,IACA,cAAA;AAAA,IACA,UAAA;AAAA,IACA,YAAA;AAAA,IACA;AAAA,GACD,CAAA;AAAA,EACD,SAAA,EAAWA,MAAE,MAAA,EAAO;AAAA,EACpB,IAAA,EAAMA,MAAE,MAAA,EAAO;AAAA,EACf,EAAA,EAAIA,MAAE,MAAA,EAAO;AAAA,EACb,QAAA,EAAUA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,EAC9B,UAAUA,KAAA,CAAE,MAAA,CAAOA,MAAE,OAAA,EAAS,EAAE,QAAA;AAClC,CAAC,CAAA;AAKD,IAAM,wBAAA,GAA2BA,MAAE,MAAA,CAAO;AAAA,EACxC,aAAA,EAAeA,MAAE,MAAA,CAAO;AAAA,IACtB,GAAA,EAAKA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,IACzB,GAAA,EAAKA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,IACzB,GAAA,EAAKA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,IACzB,GAAA,EAAKA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,IACzB,IAAA,EAAMA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,IAC1B,GAAA,EAAKA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA;AAAS,GAC1B,CAAA;AAAA,EACD,MAAA,EAAQA,MAAE,MAAA,CAAO;AAAA,IACf,gBAAA,EAAkBA,MAAE,MAAA,EAAO;AAAA,IAC3B,YAAA,EAAcA,MAAE,MAAA,EAAO;AAAA,IACvB,iBAAA,EAAmBA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA;AAAS,GACxC,CAAA;AAAA,EACD,aAAA,EAAeA,MAAE,MAAA,EAAO;AAAA,EACxB,WAAA,EAAaA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,EACjC,KAAA,EAAOA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA;AACpB,CAAC,CAAA;AAKD,IAAM,iBAAA,GAAoBA,MAAE,MAAA,CAAO;AAAA,EACjC,KAAA,EAAOA,MAAE,MAAA,EAAO;AAAA,EAChB,QAAA,EAAUA,MAAE,MAAA,EAAO;AAAA,EACnB,IAAA,EAAMA,MAAE,MAAA,EAAO;AAAA,EACf,cAAA,EAAgBA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,EACpC,KAAA,EAAOA,MAAE,MAAA,EAAO;AAAA,EAChB,UAAA,EAAYA,MAAE,MAAA,EAAO;AAAA,EACrB,QAAA,EAAUA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA;AACvB,CAAC,CAAA;AAKM,IAAM,eAAA,GAAkBA,MAAE,MAAA,CAAO;AAAA,EACtC,WAAA,EAAaA,MAAE,MAAA,EAAO,CAAE,IAAI,CAAA,EAAG,yBAAyB,CAAA,CAAE,GAAA,CAAI,GAAK,CAAA;AAAA,EACnE,MAAMA,KAAA,CAAE,KAAA;AAAA,IACNA,MAAE,MAAA,CAAO;AAAA,MACP,KAAA,EAAOA,MAAE,IAAA,CAAK,CAAC,SAAS,MAAA,EAAQ,MAAA,EAAQ,KAAK,CAAC,CAAA;AAAA,MAC9C,OAAA,EAASA,MAAE,MAAA,EAAO;AAAA,MAClB,SAAA,EAAWA,MAAE,MAAA,EAAO;AAAA,MACpB,KAAA,EAAOA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA;AAAS,KAC5B;AAAA,GACH;AAAA,EACA,GAAA,EAAKA,KAAA,CAAE,MAAA,EAAO,CAAE,GAAA,EAAI,CAAE,EAAA,CAAGA,KAAA,CAAE,MAAA,EAAO,CAAE,MAAA,CAAO,CAAC,CAAC,CAAA;AAAA,EAC7C,SAAA,EAAWA,MAAE,MAAA,EAAO;AAAA,EACpB,SAAA,EAAWA,MAAE,MAAA,EAAO;AAAA,EACpB,QAAA,EAAUA,MACP,MAAA,CAAO;AAAA,IACN,UAAA,EAAYA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,IAChC,QAAQA,KAAA,CAAE,KAAA,CAAMA,MAAE,MAAA,EAAQ,EAAE,QAAA;AAAS,GACtC,EACA,QAAA,EAAS;AAAA;AAAA,EAEZ,WAAA,EAAaA,KAAA,CAAE,KAAA,CAAM,gBAAgB,EAAE,QAAA,EAAS;AAAA,EAChD,WAAA,EAAaA,KAAA,CAAE,KAAA,CAAM,qBAAqB,EAAE,QAAA,EAAS;AAAA,EACrD,WAAA,EAAa,yBAAyB,QAAA,EAAS;AAAA,EAC/C,aAAA,EAAeA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,EACnC,WAAA,EAAa,kBAAkB,QAAA;AACjC,CAAC;AAgBD,IAAM,cAAA,GAAiB;AAAA,EACrB,mBAAA,EAAqB,CAAC,IAAA,KACpB,CAAA,4BAAA,EAA+B,IAAI,CAAA,4HAAA,CAAA;AAAA,EAGrC,aAAA,EACE,4MAAA;AAAA,EAGF,kBAAA,EACE,gHAAA;AAAA,EAEF,cAAA,EAAgB,CAAC,IAAA,KACf,CAAA,YAAA,EAAe,IAAI,CAAA,8HAAA,CAAA;AAAA,EAGrB,YAAA,EACE,oHAAA;AAAA,EAEF,aAAA,EAAe,CAAC,OAAA,KACd,CAAA,oCAAA,EAAuC,OAAO,CAAA,+CAAA,CAAA;AAAA,EAEhD,cAAA,EAAgB,CAAC,OAAA,KACf,CAAA,uBAAA,EAA0B,OAAO,CAAA,mFAAA;AACrC,CAAA;AAKA,eAAsB,iBAAA,CACpB,SACA,MAAA,EAC4B;AAE5B,EAAA,IAAI,CAAC,OAAO,WAAA,EAAa;AACvB,IAAA,OAAO;AAAA,MACL,OAAA,EAAS,KAAA;AAAA,MACT,SAAS,cAAA,CAAe;AAAA,KAC1B;AAAA,EACF;AAGA,EAAA,MAAM,CAAC,KAAA,EAAO,IAAI,IAAI,MAAA,CAAO,UAAA,CAAW,MAAM,GAAG,CAAA;AAEjD,EAAA,IAAI,CAAC,KAAA,IAAS,CAAC,IAAA,IAAQ,MAAA,CAAO,WAAW,KAAA,CAAM,GAAG,CAAA,CAAE,MAAA,KAAW,CAAA,EAAG;AAChE,IAAA,OAAO;AAAA,MACL,OAAA,EAAS,KAAA;AAAA,MACT,OAAA,EAAS,cAAA,CAAe,mBAAA,CAAoB,MAAA,CAAO,UAAU;AAAA,KAC/D;AAAA,EACF;AAEA,EAAA,MAAM,OAAA,GAAU,IAAIC,YAAA,CAAQ;AAAA,IAC1B,MAAM,MAAA,CAAO;AAAA,GACd,CAAA;AAGD,EAAA,MAAM,aAAA,GAAgB,QAAQ,IAAA,CAC3B,KAAA,CAAM,GAAgB,CAAA,CACtB,GAAA,CAAI,CAAC,GAAA,KAAQ;AACZ,IAAA,MAAM,YAAY,IAAI,IAAA,CAAK,GAAA,CAAI,SAAS,EAAE,WAAA,EAAY;AACtD,IAAA,OAAO,CAAA,CAAA,EAAI,SAAS,CAAA,GAAA,EAAM,GAAA,CAAI,MAAM,WAAA,EAAa,CAAA,EAAA,EAAK,iBAAA,CAAkB,GAAA,CAAI,OAAO,CAAC,CAAA,EAClF,IAAI,KAAA,GAAQ;AAAA,EAAK,iBAAA,CAAkB,GAAA,CAAI,KAAK,CAAC,KAAK,EACpD,CAAA,CAAA;AAAA,EACF,CAAC,CAAA,CACA,IAAA,CAAK,IAAI,CAAA;AAGZ,EAAA,MAAM,oBAAA,GAAuB,OAAA,CAAQ,WAAA,EAAa,MAAA,GAC9C,OAAA,CAAQ,WAAA,CAAY,KAAA,CAAM,GAAG,CAAA,CAAE,GAAA,CAAI,CAAC,MAAA,KAAW;AAC7C,IAAA,MAAM,OAAO,IAAI,IAAA,CAAK,MAAA,CAAO,SAAS,EAAE,WAAA,EAAY;AACpD,IAAA,MAAM,KAAA,GAAQ,MAAA,CAAO,KAAA,GAAQ,CAAA,SAAA,EAAO,iBAAA,CAAkB,MAAA,CAAO,KAAA,CAAM,KAAA,CAAM,CAAA,EAAG,EAAE,CAAC,CAAC,CAAA,CAAA,CAAA,GAAM,EAAA;AACtF,IAAA,OAAO,CAAA,CAAA,EAAI,IAAI,CAAA,EAAA,EAAK,MAAA,CAAO,IAAA,CAAK,WAAA,EAAa,CAAA,IAAA,EAAO,MAAA,CAAO,MAAM,CAAA,EAAG,KAAK,CAAA,CAAA;AAAA,EAC3E,CAAC,CAAA,CAAE,IAAA,CAAK,IAAI,CAAA,GACZ,IAAA;AAGJ,EAAA,MAAM,oBAAA,GAAuB,OAAA,CAAQ,WAAA,EAAa,MAAA,GAC9C,OAAA,CAAQ,WAAA,CAAY,KAAA,CAAM,GAAG,CAAA,CAAE,GAAA,CAAI,CAAC,GAAA,KAAQ;AAC1C,IAAA,MAAM,OAAO,IAAI,IAAA,CAAK,GAAA,CAAI,SAAS,EAAE,WAAA,EAAY;AACjD,IAAA,MAAM,WAAW,GAAA,CAAI,QAAA,GAAW,CAAA,EAAA,EAAK,GAAA,CAAI,QAAQ,CAAA,GAAA,CAAA,GAAQ,EAAA;AACzD,IAAA,OAAO,IAAI,IAAI,CAAA,EAAA,EAAK,GAAA,CAAI,IAAI,KAAK,iBAAA,CAAkB,GAAA,CAAI,IAAI,CAAC,WAAM,iBAAA,CAAkB,GAAA,CAAI,EAAE,CAAC,GAAG,QAAQ,CAAA,CAAA;AAAA,EACxG,CAAC,CAAA,CAAE,IAAA,CAAK,IAAI,CAAA,GACZ,IAAA;AAGJ,EAAA,MAAM,oBAAA,GAAuB,QAAQ,WAAA,GACjC;AAAA,IACE,CAAA,KAAA,EAAQ,QAAQ,WAAA,CAAY,aAAA,CAAc,KAAK,OAAA,CAAQ,CAAC,KAAK,KAAK,CAAA,EAAA,CAAA;AAAA,IAClE,CAAA,KAAA,EAAQ,QAAQ,WAAA,CAAY,aAAA,CAAc,KAAK,OAAA,CAAQ,CAAC,KAAK,KAAK,CAAA,EAAA,CAAA;AAAA,IAClE,CAAA,KAAA,EAAQ,QAAQ,WAAA,CAAY,aAAA,CAAc,KAAK,OAAA,CAAQ,CAAC,KAAK,KAAK,CAAA,CAAA;AAAA,IAClE,CAAA,MAAA,EAAS,QAAQ,WAAA,CAAY,aAAA,CAAc,MAAM,OAAA,CAAQ,CAAC,KAAK,KAAK,CAAA,EAAA,CAAA;AAAA,IACpE,CAAA,YAAA,EAAe,OAAA,CAAQ,WAAA,CAAY,MAAA,CAAO,gBAAgB,CAAA,EAAA,CAAA;AAAA,IAC1D,CAAA,eAAA,EAAkB,OAAA,CAAQ,WAAA,CAAY,MAAA,CAAO,YAAY,CAAA,EAAA,CAAA;AAAA,IACzD,CAAA,WAAA,EAAc,OAAA,CAAQ,WAAA,CAAY,aAAa,CAAA;AAAA,GACjD,CAAE,IAAA,CAAK,KAAK,CAAA,GACZ,IAAA;AAGJ,EAAA,MAAM,oBAAA,GAAuB,QAAQ,WAAA,GACjC;AAAA,IACE,CAAA,WAAA,EAAc,iBAAA,CAAkB,OAAA,CAAQ,WAAA,CAAY,QAAQ,CAAC,CAAA,CAAA;AAAA,IAC7D,CAAA,WAAA,EAAc,OAAA,CAAQ,WAAA,CAAY,KAAK,CAAA,CAAA;AAAA,IACvC,sBAAsB,OAAA,CAAQ,WAAA,CAAY,aAAa,GAAA,EAAM,OAAA,CAAQ,CAAC,CAAC,CAAA,CAAA,CAAA;AAAA,IACvE,QAAQ,WAAA,CAAY,cAAA,GAAiB,kBAAkB,OAAA,CAAQ,WAAA,CAAY,cAAc,CAAA,CAAA,GAAK;AAAA,IAC9F,MAAA,CAAO,OAAO,CAAA,CAAE,IAAA,CAAK,IAAI,CAAA,GAC3B,IAAA;AAGJ,EAAA,IAAI,SAAA,GAAY,CAAA;;AAAA;AAAA,EAGhB,iBAAA,CAAkB,OAAA,CAAQ,WAAW,CAAC;;AAAA;AAAA,WAAA,EAG3B,iBAAA,CAAkB,OAAA,CAAQ,GAAA,IAAO,KAAK,CAAC;AAAA,kBAAA,EAChC,OAAA,CAAQ,aAAa,KAAK;AAAA,mBAAA,EACzB,IAAI,IAAA,CAAK,OAAA,CAAQ,SAAS,CAAA,CAAE,aAAa;AAAA,CAAA;AAG5D,EAAA,IAAI,oBAAA,EAAsB;AACxB,IAAA,SAAA,IAAa;AAAA;AAAA,EAEf,oBAAoB;AAAA,CAAA;AAAA,EAEpB;AAEA,EAAA,IAAI,oBAAA,EAAsB;AACxB,IAAA,SAAA,IAAa;AAAA;AAAA,EAEf,oBAAoB;AAAA,CAAA;AAAA,EAEpB;AAEA,EAAA,SAAA,IAAa;AAAA;AAAA;AAAA,EAGb,iBAAiB,kBAAkB;AAAA;AAAA,CAAA;AAInC,EAAA,IAAI,oBAAA,EAAsB;AACxB,IAAA,SAAA,IAAa;AAAA;AAAA;AAAA,EAGf,oBAAoB;AAAA;AAAA,CAAA;AAAA,EAGpB;AAEA,EAAA,IAAI,oBAAA,EAAsB;AACxB,IAAA,SAAA,IAAa;AAAA;AAAA;AAAA,EAGf,oBAAoB;AAAA;AAAA,CAAA;AAAA,EAGpB;AAEA,EAAA,IAAI,QAAQ,aAAA,EAAe;AACzB,IAAA,SAAA,IAAa;AAAA;AAAA,wCAAA,EAAA,CAEmB,QAAQ,aAAA,CAAc,MAAA,GAAS,IAAA,EAAM,OAAA,CAAQ,CAAC,CAAC,CAAA;AAAA,CAAA;AAAA,EAEjF;AAEA,EAAA,SAAA,IAAa;AAAA;AAAA;AAAA;AAAA,CAAA;AAMb,EAAA,MAAM,KAAA,GAAQ,CAAA,EAAG,OAAA,CAAQ,WAAA,CAAY,MAAM,CAAA,EAAG,EAAE,CAAC,CAAA,EAC/C,OAAA,CAAQ,WAAA,CAAY,MAAA,GAAS,EAAA,GAAK,QAAQ,EAC5C,CAAA,CAAA;AAEA,EAAA,IAAI;AACF,IAAA,MAAM,QAAA,GAAW,MAAM,OAAA,CAAQ,MAAA,CAAO,MAAA,CAAO;AAAA,MAC3C,KAAA;AAAA,MACA,IAAA;AAAA,MACA,KAAA;AAAA,MACA,IAAA,EAAM,SAAA;AAAA,MACN,MAAA,EAAQ;AAAA,QACN,GAAI,MAAA,CAAO,aAAA,IAAiB,CAAC,YAAY,CAAA;AAAA,QACzC,GAAK,OAAA,CAAQ,QAAA,EAAgD,MAAA,IAAU;AAAC;AAC1E,KACD,CAAA;AAED,IAAA,OAAO;AAAA,MACL,OAAA,EAAS,IAAA;AAAA,MACT,QAAA,EAAU,SAAS,IAAA,CAAK,QAAA;AAAA,MACxB,WAAA,EAAa,SAAS,IAAA,CAAK;AAAA,KAC7B;AAAA,EACF,SAAS,KAAA,EAAO;AAEd,IAAA,IAAI,iBAAiB,KAAA,EAAO;AAC1B,MAAA,MAAM,YAAA,GAAe,KAAA,CAAM,OAAA,CAAQ,WAAA,EAAY;AAG/C,MAAA,IAAI,aAAa,QAAA,CAAS,iBAAiB,KAAK,YAAA,CAAa,QAAA,CAAS,KAAK,CAAA,EAAG;AAC5E,QAAA,OAAO;AAAA,UACL,OAAA,EAAS,KAAA;AAAA,UACT,SAAS,cAAA,CAAe;AAAA,SAC1B;AAAA,MACF;AAGA,MAAA,IAAI,aAAa,QAAA,CAAS,WAAW,KAAK,YAAA,CAAa,QAAA,CAAS,KAAK,CAAA,EAAG;AACtE,QAAA,OAAO;AAAA,UACL,OAAA,EAAS,KAAA;AAAA,UACT,OAAA,EAAS,cAAA,CAAe,cAAA,CAAe,MAAA,CAAO,UAAU;AAAA,SAC1D;AAAA,MACF;AAGA,MAAA,IAAI,aAAa,QAAA,CAAS,YAAY,KAAK,YAAA,CAAa,QAAA,CAAS,KAAK,CAAA,EAAG;AACvE,QAAA,OAAO;AAAA,UACL,OAAA,EAAS,KAAA;AAAA,UACT,SAAS,cAAA,CAAe;AAAA,SAC1B;AAAA,MACF;AAGA,MAAA,IACE,YAAA,CAAa,QAAA,CAAS,WAAW,CAAA,IACjC,YAAA,CAAa,QAAA,CAAS,cAAc,CAAA,IACpC,YAAA,CAAa,QAAA,CAAS,SAAS,CAAA,EAC/B;AACA,QAAA,OAAO;AAAA,UACL,OAAA,EAAS,KAAA;AAAA,UACT,OAAA,EAAS,cAAA,CAAe,aAAA,CAAc,KAAA,CAAM,OAAO;AAAA,SACrD;AAAA,MACF;AAEA,MAAA,OAAO;AAAA,QACL,OAAA,EAAS,KAAA;AAAA,QACT,OAAA,EAAS,cAAA,CAAe,cAAA,CAAe,KAAA,CAAM,OAAO;AAAA,OACtD;AAAA,IACF;AAEA,IAAA,OAAO;AAAA,MACL,OAAA,EAAS,KAAA;AAAA,MACT,OAAA,EAAS,cAAA,CAAe,cAAA,CAAe,wBAAwB;AAAA,KACjE;AAAA,EACF;AACF;AAKO,SAAS,kBACd,OAAA,EACiF;AACjF,EAAA,MAAM,MAAA,GAAS,eAAA,CAAgB,SAAA,CAAU,OAAO,CAAA;AAEhD,EAAA,IAAI,OAAO,OAAA,EAAS;AAClB,IAAA,OAAO,EAAE,OAAA,EAAS,IAAA,EAAM,IAAA,EAAM,OAAO,IAAA,EAAK;AAAA,EAC5C;AAEA,EAAA,MAAM,gBAAgB,MAAA,CAAO,KAAA,CAAM,OAChC,GAAA,CAAI,CAAC,MAAM,CAAA,EAAG,CAAA,CAAE,KAAK,IAAA,CAAK,GAAG,CAAC,CAAA,EAAA,EAAK,CAAA,CAAE,OAAO,CAAA,CAAE,CAAA,CAC9C,KAAK,IAAI,CAAA;AAEZ,EAAA,OAAO,EAAE,OAAA,EAAS,KAAA,EAAO,KAAA,EAAO,aAAA,EAAc;AAChD;AAMA,eAAsB,eAAA,CACpB,MACA,MAAA,EAC4F;AAC5F,EAAA,MAAM,UAAA,GAAa,kBAAkB,IAAI,CAAA;AAEzC,EAAA,IAAI,CAAC,WAAW,OAAA,EAAS;AACvB,IAAA,OAAO;AAAA,MACL,MAAA,EAAQ,GAAA;AAAA,MACR,MAAM,EAAE,OAAA,EAAS,KAAA,EAAO,OAAA,EAAS,WAAW,KAAA;AAAM,KACpD;AAAA,EACF;AAEA,EAAA,MAAM,MAAA,GAAS,MAAM,iBAAA,CAAkB,UAAA,CAAW,MAAM,MAAM,CAAA;AAE9D,EAAA,OAAO;AAAA,IACL,MAAA,EAAQ,MAAA,CAAO,OAAA,GAAU,GAAA,GAAM,GAAA;AAAA,IAC/B,IAAA,EAAM;AAAA,GACR;AACF;AAgCO,SAAS,mBAAmB,MAAA,EAA4B;AAC7D,EAAA,OAAO,OAAO,OAAA,KAAwC;AACpD,IAAA,IAAI;AACF,MAAA,MAAM,IAAA,GAAO,MAAM,OAAA,CAAQ,IAAA,EAAK;AAChC,MAAA,MAAM,MAAA,GAAS,MAAM,eAAA,CAAgB,IAAA,EAAM,MAAM,CAAA;AAEjD,MAAA,OAAO,QAAA,CAAS,KAAK,MAAA,CAAO,IAAA,EAAM,EAAE,MAAA,EAAQ,MAAA,CAAO,QAAQ,CAAA;AAAA,IAC7D,SAAS,KAAA,EAAO;AACd,MAAA,MAAM,OAAA,GACJ,KAAA,YAAiB,KAAA,GAAQ,KAAA,CAAM,OAAA,GAAU,uBAAA;AAC3C,MAAA,OAAO,QAAA,CAAS,IAAA,CAAK,EAAE,OAAA,EAAS,KAAA,EAAO,SAAQ,EAAG,EAAE,MAAA,EAAQ,GAAA,EAAK,CAAA;AAAA,IACnE;AAAA,EACF,CAAA;AACF;AAGO,IAAM,mBAAA,GAAsB;AAmB5B,SAAS,qBAAqB,MAAA,EAA4B;AAC/D,EAAA,OAAO,OACL,KACA,GAAA,KACkB;AAClB,IAAA,IAAI;AACF,MAAA,MAAM,MAAA,GAAS,MAAM,eAAA,CAAgB,GAAA,CAAI,MAAM,MAAM,CAAA;AACrD,MAAA,GAAA,CAAI,OAAO,MAAA,CAAO,MAAM,CAAA,CAAE,IAAA,CAAK,OAAO,IAAI,CAAA;AAAA,IAC5C,SAAS,KAAA,EAAO;AACd,MAAA,MAAM,OAAA,GACJ,KAAA,YAAiB,KAAA,GAAQ,KAAA,CAAM,OAAA,GAAU,uBAAA;AAC3C,MAAA,GAAA,CAAI,MAAA,CAAO,GAAG,CAAA,CAAE,IAAA,CAAK,EAAE,OAAA,EAAS,KAAA,EAAO,SAAS,CAAA;AAAA,IAClD;AAAA,EACF,CAAA;AACF;AAkBO,SAAS,qBAAqB,MAAA,EAA4B;AAC/D,EAAA,OAAO,OACL,SACA,KAAA,KACkB;AAClB,IAAA,IAAI;AACF,MAAA,MAAM,MAAA,GAAS,MAAM,eAAA,CAAgB,OAAA,CAAQ,MAAM,MAAM,CAAA;AACzD,MAAA,KAAA,CAAM,OAAO,MAAA,CAAO,MAAM,CAAA,CAAE,IAAA,CAAK,OAAO,IAAI,CAAA;AAAA,IAC9C,SAAS,KAAA,EAAO;AACd,MAAA,MAAM,OAAA,GACJ,KAAA,YAAiB,KAAA,GAAQ,KAAA,CAAM,OAAA,GAAU,uBAAA;AAC3C,MAAA,KAAA,CAAM,MAAA,CAAO,GAAG,CAAA,CAAE,IAAA,CAAK,EAAE,OAAA,EAAS,KAAA,EAAO,SAAS,CAAA;AAAA,IACpD;AAAA,EACF,CAAA;AACF;AA4BO,SAAS,iBAAiB,MAAA,EAA4B;AAC3D,EAAA,OAAO,OAAO,GAAA,KAIO;AACnB,IAAA,IAAI;AACF,MAAA,MAAM,SAAS,MAAM,eAAA,CAAgB,GAAA,CAAI,OAAA,CAAQ,MAAM,MAAM,CAAA;AAC7D,MAAA,GAAA,CAAI,SAAS,MAAA,CAAO,MAAA;AACpB,MAAA,GAAA,CAAI,OAAO,MAAA,CAAO,IAAA;AAAA,IACpB,SAAS,KAAA,EAAO;AACd,MAAA,MAAM,OAAA,GACJ,KAAA,YAAiB,KAAA,GAAQ,KAAA,CAAM,OAAA,GAAU,uBAAA;AAC3C,MAAA,GAAA,CAAI,MAAA,GAAS,GAAA;AACb,MAAA,GAAA,CAAI,IAAA,GAAO,EAAE,OAAA,EAAS,KAAA,EAAO,OAAA,EAAQ;AAAA,IACvC;AAAA,EACF,CAAA;AACF;AAsBO,SAAS,kBAAkB,MAAA,EAA4B;AAC5D,EAAA,OAAO,OACL,KACA,GAAA,KAKkB;AAClB,IAAA,MAAM,SAAmB,EAAC;AAE1B,IAAA,OAAO,IAAI,OAAA,CAAQ,CAAC,OAAA,KAAY;AAC9B,MAAA,GAAA,CAAI,GAAG,MAAA,EAAQ,CAAC,UAAkB,MAAA,CAAO,IAAA,CAAK,KAAK,CAAC,CAAA;AACpD,MAAA,GAAA,CAAI,EAAA,CAAG,OAAO,YAAY;AACxB,QAAA,IAAI;AACF,UAAA,MAAM,OAAA,GAAU,MAAA,CAAO,MAAA,CAAO,MAAM,EAAE,QAAA,EAAS;AAC/C,UAAA,MAAM,IAAA,GAAO,IAAA,CAAK,KAAA,CAAM,OAAO,CAAA;AAC/B,UAAA,MAAM,MAAA,GAAS,MAAM,eAAA,CAAgB,IAAA,EAAM,MAAM,CAAA;AAEjD,UAAA,GAAA,CAAI,aAAa,MAAA,CAAO,MAAA;AACxB,UAAA,GAAA,CAAI,SAAA,CAAU,gBAAgB,kBAAkB,CAAA;AAChD,UAAA,GAAA,CAAI,GAAA,CAAI,IAAA,CAAK,SAAA,CAAU,MAAA,CAAO,IAAI,CAAC,CAAA;AAAA,QACrC,SAAS,KAAA,EAAO;AACd,UAAA,MAAM,OAAA,GACJ,KAAA,YAAiB,KAAA,GAAQ,KAAA,CAAM,OAAA,GAAU,uBAAA;AAC3C,UAAA,GAAA,CAAI,UAAA,GAAa,GAAA;AACjB,UAAA,GAAA,CAAI,SAAA,CAAU,gBAAgB,kBAAkB,CAAA;AAChD,UAAA,GAAA,CAAI,GAAA,CAAI,KAAK,SAAA,CAAU,EAAE,SAAS,KAAA,EAAO,OAAA,EAAS,CAAC,CAAA;AAAA,QACrD;AACA,QAAA,OAAA,EAAQ;AAAA,MACV,CAAC,CAAA;AAAA,IACH,CAAC,CAAA;AAAA,EACH,CAAA;AACF","file":"server.cjs","sourcesContent":["/**\n * Sensitive Data Masking Engine\n * Security-first approach to prevent PII leakage in bug reports\n */\n\ninterface MaskingPattern {\n  name: string;\n  pattern: RegExp;\n  replacement: string;\n}\n\n/**\n * Collection of regex patterns to detect and mask sensitive data\n */\nconst MASKING_PATTERNS: MaskingPattern[] = [\n  // Email addresses\n  {\n    name: 'email',\n    pattern: /\\b[\\w.-]+@[\\w.-]+\\.\\w{2,4}\\b/gi,\n    replacement: '[EMAIL_REDACTED]',\n  },\n  // Bearer tokens\n  {\n    name: 'bearer_token',\n    pattern: /Bearer\\s+[a-zA-Z0-9\\-._~+/]+=*/gi,\n    replacement: 'Bearer [TOKEN_REDACTED]',\n  },\n  // Generic API keys (common patterns)\n  {\n    name: 'api_key_param',\n    pattern: /(?:api[_-]?key|apikey|api[_-]?token)[=:][\"']?[a-zA-Z0-9\\-._~+/]{16,}[\"']?/gi,\n    replacement: 'api_key=[API_KEY_REDACTED]',\n  },\n  // Authorization headers\n  {\n    name: 'auth_header',\n    pattern: /(?:Authorization|X-API-Key|X-Auth-Token)[:\\s]+[\"']?[a-zA-Z0-9\\-._~+/]{8,}[\"']?/gi,\n    replacement: 'Authorization: [AUTH_REDACTED]',\n  },\n  // Credit card numbers (Visa, Mastercard, Amex, etc.)\n  {\n    name: 'credit_card',\n    pattern: /\\b(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|3[47][0-9]{13}|6(?:011|5[0-9]{2})[0-9]{12}|(?:2131|1800|35\\d{3})\\d{11})\\b/g,\n    replacement: '[CARD_REDACTED]',\n  },\n  // Credit card with spaces/dashes\n  {\n    name: 'credit_card_formatted',\n    pattern: /\\b(?:\\d{4}[-\\s]?){3}\\d{4}\\b/g,\n    replacement: '[CARD_REDACTED]',\n  },\n  // SSN (US Social Security Numbers)\n  {\n    name: 'ssn',\n    pattern: /\\b\\d{3}[-\\s]?\\d{2}[-\\s]?\\d{4}\\b/g,\n    replacement: '[SSN_REDACTED]',\n  },\n  // Phone numbers (various formats - US)\n  {\n    name: 'phone',\n    pattern: /\\b(?:\\+?1[-.\\s]?)?(?:\\(?[0-9]{3}\\)?[-.\\s]?)?[0-9]{3}[-.\\s]?[0-9]{4}\\b/g,\n    replacement: '[PHONE_REDACTED]',\n  },\n  // IPv4 addresses\n  {\n    name: 'ipv4',\n    pattern: /\\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\b/g,\n    replacement: '[IP_REDACTED]',\n  },\n  // IPv6 addresses (full and compressed forms)\n  {\n    name: 'ipv6',\n    pattern: /(?:[0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|(?:[0-9a-fA-F]{1,4}:)+:(?:[0-9a-fA-F]{1,4}:)*[0-9a-fA-F]{1,4}|::(?:[0-9a-fA-F]{1,4}:)*[0-9a-fA-F]{1,4}|::1/g,\n    replacement: '[IP_REDACTED]',\n  },\n  // AWS Access Keys\n  {\n    name: 'aws_key',\n    pattern: /(?:AKIA|ABIA|ACCA|ASIA)[A-Z0-9]{16}/g,\n    replacement: '[AWS_KEY_REDACTED]',\n  },\n  // AWS Secret Keys\n  {\n    name: 'aws_secret',\n    pattern: /(?:aws_secret_access_key|AWS_SECRET_ACCESS_KEY)[=:\\s]+[\"']?[a-zA-Z0-9/+=]{40}[\"']?/gi,\n    replacement: 'aws_secret_access_key=[AWS_SECRET_REDACTED]',\n  },\n  // GitHub tokens\n  {\n    name: 'github_token',\n    pattern: /(?:ghp|gho|ghu|ghs|ghr)_[a-zA-Z0-9]{36,}/g,\n    replacement: '[GITHUB_TOKEN_REDACTED]',\n  },\n  // OpenAI API keys\n  {\n    name: 'openai_key',\n    pattern: /sk-[a-zA-Z0-9]{20,}/g,\n    replacement: '[OPENAI_KEY_REDACTED]',\n  },\n  // Anthropic API keys\n  {\n    name: 'anthropic_key',\n    pattern: /sk-ant-[a-zA-Z0-9\\-]{20,}/g,\n    replacement: '[ANTHROPIC_KEY_REDACTED]',\n  },\n  // Google API keys\n  {\n    name: 'google_key',\n    pattern: /AIza[a-zA-Z0-9\\-_]{35}/g,\n    replacement: '[GOOGLE_KEY_REDACTED]',\n  },\n  // Stripe keys\n  {\n    name: 'stripe_key',\n    pattern: /(?:sk|pk)_(?:test|live)_[a-zA-Z0-9]{24,}/g,\n    replacement: '[STRIPE_KEY_REDACTED]',\n  },\n  // JWT tokens\n  {\n    name: 'jwt',\n    pattern: /eyJ[a-zA-Z0-9\\-_]+\\.eyJ[a-zA-Z0-9\\-_]+\\.[a-zA-Z0-9\\-_.+/=]*/g,\n    replacement: '[JWT_REDACTED]',\n  },\n  // Generic secrets in environment variable format\n  {\n    name: 'env_secret',\n    pattern: /(?:SECRET|PASSWORD|PASSWD|PWD|TOKEN|PRIVATE[_-]?KEY)[=:\\s]+[\"']?[^\\s\"']{8,}[\"']?/gi,\n    replacement: '[SECRET_REDACTED]',\n  },\n  // Database connection strings\n  {\n    name: 'database_url',\n    pattern: /(?:mongodb|mysql|postgresql|postgres|redis|amqp):\\/\\/[^\\s\"']+/gi,\n    replacement: '[DATABASE_URL_REDACTED]',\n  },\n  // Private keys (PEM format markers)\n  {\n    name: 'private_key',\n    pattern: /-----BEGIN (?:RSA |EC |DSA |OPENSSH )?PRIVATE KEY-----[\\s\\S]*?-----END (?:RSA |EC |DSA |OPENSSH )?PRIVATE KEY-----/g,\n    replacement: '[PRIVATE_KEY_REDACTED]',\n  },\n];\n\n/**\n * Masks sensitive data in the provided text\n * @param text - The text to mask\n * @returns The masked text with sensitive data redacted\n */\nexport function maskSensitiveData(text: string): string {\n  if (!text || typeof text !== 'string') {\n    return text;\n  }\n\n  let maskedText = text;\n\n  for (const { pattern, replacement } of MASKING_PATTERNS) {\n    maskedText = maskedText.replace(pattern, replacement);\n  }\n\n  return maskedText;\n}\n\n/**\n * Masks sensitive data in an object recursively\n * @param obj - The object to mask\n * @returns A new object with sensitive data masked\n */\nexport function maskSensitiveObject<T>(obj: T): T {\n  if (obj === null || obj === undefined) {\n    return obj;\n  }\n\n  if (typeof obj === 'string') {\n    return maskSensitiveData(obj) as T;\n  }\n\n  if (Array.isArray(obj)) {\n    return obj.map((item) => maskSensitiveObject(item)) as T;\n  }\n\n  if (typeof obj === 'object') {\n    const masked: Record<string, unknown> = {};\n    for (const [key, value] of Object.entries(obj)) {\n      // Also mask sensitive key names\n      const lowerKey = key.toLowerCase();\n      if (\n        lowerKey.includes('password') ||\n        lowerKey.includes('secret') ||\n        lowerKey.includes('token') ||\n        lowerKey.includes('apikey') ||\n        lowerKey.includes('api_key') ||\n        lowerKey.includes('private')\n      ) {\n        masked[key] = '[REDACTED]';\n      } else {\n        masked[key] = maskSensitiveObject(value);\n      }\n    }\n    return masked as T;\n  }\n\n  return obj;\n}\n\n/**\n * Validates that no obvious sensitive data remains\n * Returns true if text appears safe, false if potential leaks detected\n */\nexport function validateMasking(text: string): boolean {\n  // Check for common unmasked patterns\n  const dangerPatterns = [\n    /@.*\\.\\w{2,4}/i, // Emails\n    /sk-[a-z0-9]/i, // API keys\n    /eyJ[a-z0-9]/i, // JWTs\n    /AKIA[A-Z0-9]/i, // AWS\n    /ghp_[a-z0-9]/i, // GitHub\n  ];\n\n  for (const pattern of dangerPatterns) {\n    if (pattern.test(text)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n","/**\n * inner-lens/server\n * Universal server-side utilities for processing bug reports\n * Works with any Node.js backend: Express, Fastify, Hono, Next.js, Nuxt, etc.\n *\n * @packageDocumentation\n */\n\nimport { Octokit } from '@octokit/rest';\nimport { z } from 'zod';\nimport type { BugReportPayload, BugReportResponse, GitHubIssuePayload } from './types';\nimport { MAX_LOG_ENTRIES } from './types';\nimport { maskSensitiveData } from './utils/masking';\n\n/**\n * Zod schema for user actions\n */\nconst UserActionSchema = z.object({\n  type: z.enum([\n    'click',\n    'dblclick',\n    'input',\n    'change',\n    'focus',\n    'blur',\n    'scroll',\n    'keydown',\n    'submit',\n    'copy',\n    'paste',\n    'select',\n  ]),\n  target: z.string(),\n  timestamp: z.number(),\n  value: z.string().optional(),\n  position: z\n    .object({\n      x: z.number(),\n      y: z.number(),\n    })\n    .optional(),\n  key: z.string().optional(),\n  metadata: z.record(z.unknown()).optional(),\n});\n\n/**\n * Zod schema for navigation entries\n */\nconst NavigationEntrySchema = z.object({\n  type: z.enum([\n    'pageload',\n    'pushstate',\n    'replacestate',\n    'popstate',\n    'hashchange',\n    'beforeunload',\n  ]),\n  timestamp: z.number(),\n  from: z.string(),\n  to: z.string(),\n  duration: z.number().optional(),\n  metadata: z.record(z.unknown()).optional(),\n});\n\n/**\n * Zod schema for performance summary\n */\nconst PerformanceSummarySchema = z.object({\n  coreWebVitals: z.object({\n    LCP: z.number().optional(),\n    FID: z.number().optional(),\n    CLS: z.number().optional(),\n    INP: z.number().optional(),\n    TTFB: z.number().optional(),\n    FCP: z.number().optional(),\n  }),\n  timing: z.object({\n    domContentLoaded: z.number(),\n    loadComplete: z.number(),\n    timeToInteractive: z.number().optional(),\n  }),\n  resourceCount: z.number(),\n  memoryUsage: z.number().optional(),\n  score: z.number().optional(),\n});\n\n/**\n * Zod schema for page context\n */\nconst PageContextSchema = z.object({\n  route: z.string(),\n  pathname: z.string(),\n  hash: z.string(),\n  componentStack: z.string().optional(),\n  title: z.string(),\n  timeOnPage: z.number(),\n  referrer: z.string().optional(),\n});\n\n/**\n * Zod schema for validating incoming bug reports\n */\nexport const BugReportSchema = z.object({\n  description: z.string().min(1, 'Description is required').max(10000),\n  logs: z.array(\n    z.object({\n      level: z.enum(['error', 'warn', 'info', 'log']),\n      message: z.string(),\n      timestamp: z.number(),\n      stack: z.string().optional(),\n    })\n  ),\n  url: z.string().url().or(z.string().length(0)),\n  userAgent: z.string(),\n  timestamp: z.number(),\n  metadata: z\n    .object({\n      repository: z.string().optional(),\n      labels: z.array(z.string()).optional(),\n    })\n    .optional(),\n  // Extended context fields\n  userActions: z.array(UserActionSchema).optional(),\n  navigations: z.array(NavigationEntrySchema).optional(),\n  performance: PerformanceSummarySchema.optional(),\n  sessionReplay: z.string().optional(),\n  pageContext: PageContextSchema.optional(),\n});\n\nexport type ValidatedBugReport = z.infer<typeof BugReportSchema>;\n\n/**\n * Configuration for the issue creator\n */\nexport interface IssueCreatorConfig {\n  githubToken: string;\n  repository: string; // \"owner/repo\" format\n  defaultLabels?: string[];\n}\n\n/**\n * Error messages with troubleshooting hints\n */\nconst ERROR_MESSAGES = {\n  INVALID_REPO_FORMAT: (repo: string) =>\n    `Invalid repository format: \"${repo}\". Expected \"owner/repo\" format (e.g., \"jhlee0409/inner-lens\"). ` +\n    `See: https://github.com/jhlee0409/inner-lens#troubleshooting`,\n\n  MISSING_TOKEN:\n    'GITHUB_TOKEN is not configured. Create a token at https://github.com/settings/tokens/new?scopes=repo ' +\n    'and add it to your environment variables. See: https://github.com/jhlee0409/inner-lens#-backend-setup',\n\n  TOKEN_UNAUTHORIZED:\n    'GITHUB_TOKEN is invalid or expired. Generate a new token at https://github.com/settings/tokens/new?scopes=repo',\n\n  REPO_NOT_FOUND: (repo: string) =>\n    `Repository \"${repo}\" not found. Check that the repository exists and your token has access. ` +\n    `For private repos, ensure the token has \"repo\" scope.`,\n\n  RATE_LIMITED:\n    'GitHub API rate limit exceeded. Wait a few minutes and try again, or use an authenticated token for higher limits.',\n\n  NETWORK_ERROR: (message: string) =>\n    `Network error connecting to GitHub: ${message}. Check your internet connection and try again.`,\n\n  INTERNAL_ERROR: (message: string) =>\n    `Internal server error: ${message}. If this persists, please report at https://github.com/jhlee0409/inner-lens/issues`,\n};\n\n/**\n * Creates a GitHub issue from a bug report\n */\nexport async function createGitHubIssue(\n  payload: BugReportPayload,\n  config: IssueCreatorConfig\n): Promise<BugReportResponse> {\n  // Validate token\n  if (!config.githubToken) {\n    return {\n      success: false,\n      message: ERROR_MESSAGES.MISSING_TOKEN,\n    };\n  }\n\n  // Validate repository format\n  const [owner, repo] = config.repository.split('/');\n\n  if (!owner || !repo || config.repository.split('/').length !== 2) {\n    return {\n      success: false,\n      message: ERROR_MESSAGES.INVALID_REPO_FORMAT(config.repository),\n    };\n  }\n\n  const octokit = new Octokit({\n    auth: config.githubToken,\n  });\n\n  // Format logs for the issue body\n  const formattedLogs = payload.logs\n    .slice(-MAX_LOG_ENTRIES)\n    .map((log) => {\n      const timestamp = new Date(log.timestamp).toISOString();\n      return `[${timestamp}] [${log.level.toUpperCase()}] ${maskSensitiveData(log.message)}${\n        log.stack ? `\\n${maskSensitiveData(log.stack)}` : ''\n      }`;\n    })\n    .join('\\n');\n\n  // Format user actions\n  const formattedUserActions = payload.userActions?.length\n    ? payload.userActions.slice(-20).map((action) => {\n        const time = new Date(action.timestamp).toISOString();\n        const value = action.value ? ` â†’ \"${maskSensitiveData(action.value.slice(0, 50))}\"` : '';\n        return `[${time}] ${action.type.toUpperCase()} on ${action.target}${value}`;\n      }).join('\\n')\n    : null;\n\n  // Format navigations\n  const formattedNavigations = payload.navigations?.length\n    ? payload.navigations.slice(-10).map((nav) => {\n        const time = new Date(nav.timestamp).toISOString();\n        const duration = nav.duration ? ` (${nav.duration}ms)` : '';\n        return `[${time}] ${nav.type}: ${maskSensitiveData(nav.from)} â†’ ${maskSensitiveData(nav.to)}${duration}`;\n      }).join('\\n')\n    : null;\n\n  // Format performance\n  const formattedPerformance = payload.performance\n    ? [\n        `LCP: ${payload.performance.coreWebVitals.LCP?.toFixed(0) ?? 'N/A'}ms`,\n        `FID: ${payload.performance.coreWebVitals.FID?.toFixed(0) ?? 'N/A'}ms`,\n        `CLS: ${payload.performance.coreWebVitals.CLS?.toFixed(3) ?? 'N/A'}`,\n        `TTFB: ${payload.performance.coreWebVitals.TTFB?.toFixed(0) ?? 'N/A'}ms`,\n        `DOM Loaded: ${payload.performance.timing.domContentLoaded}ms`,\n        `Load Complete: ${payload.performance.timing.loadComplete}ms`,\n        `Resources: ${payload.performance.resourceCount}`,\n      ].join(' | ')\n    : null;\n\n  // Format page context\n  const formattedPageContext = payload.pageContext\n    ? [\n        `**Route:** ${maskSensitiveData(payload.pageContext.pathname)}`,\n        `**Title:** ${payload.pageContext.title}`,\n        `**Time on Page:** ${(payload.pageContext.timeOnPage / 1000).toFixed(1)}s`,\n        payload.pageContext.componentStack ? `**Component:** ${payload.pageContext.componentStack}` : null,\n      ].filter(Boolean).join('\\n')\n    : null;\n\n  // Create issue body with structured format\n  let issueBody = `## Bug Report\n\n### Description\n${maskSensitiveData(payload.description)}\n\n### Environment\n- **URL:** ${maskSensitiveData(payload.url || 'N/A')}\n- **User Agent:** ${payload.userAgent || 'N/A'}\n- **Reported At:** ${new Date(payload.timestamp).toISOString()}\n`;\n\n  if (formattedPageContext) {\n    issueBody += `\n### Page Context\n${formattedPageContext}\n`;\n  }\n\n  if (formattedPerformance) {\n    issueBody += `\n### Performance\n${formattedPerformance}\n`;\n  }\n\n  issueBody += `\n### Console Logs\n\\`\\`\\`\n${formattedLogs || 'No logs captured'}\n\\`\\`\\`\n`;\n\n  if (formattedUserActions) {\n    issueBody += `\n### User Actions (Last 20)\n\\`\\`\\`\n${formattedUserActions}\n\\`\\`\\`\n`;\n  }\n\n  if (formattedNavigations) {\n    issueBody += `\n### Navigation History\n\\`\\`\\`\n${formattedNavigations}\n\\`\\`\\`\n`;\n  }\n\n  if (payload.sessionReplay) {\n    issueBody += `\n### Session Replay\nðŸ“¹ Session replay data attached (${(payload.sessionReplay.length / 1024).toFixed(1)}KB compressed)\n`;\n  }\n\n  issueBody += `\n---\n*This issue was automatically created by [inner-lens](https://github.com/jhlee0409/inner-lens).*\n*Awaiting AI analysis...*\n`;\n\n  const title = `${payload.description.slice(0, 80)}${\n    payload.description.length > 80 ? '...' : ''\n  }`;\n\n  try {\n    const response = await octokit.issues.create({\n      owner,\n      repo,\n      title,\n      body: issueBody,\n      labels: [\n        ...(config.defaultLabels ?? ['inner-lens']),\n        ...((payload.metadata as { labels?: string[] } | undefined)?.labels ?? []),\n      ],\n    });\n\n    return {\n      success: true,\n      issueUrl: response.data.html_url,\n      issueNumber: response.data.number,\n    };\n  } catch (error) {\n    // Handle specific GitHub API errors\n    if (error instanceof Error) {\n      const errorMessage = error.message.toLowerCase();\n\n      // Unauthorized (401) - invalid token\n      if (errorMessage.includes('bad credentials') || errorMessage.includes('401')) {\n        return {\n          success: false,\n          message: ERROR_MESSAGES.TOKEN_UNAUTHORIZED,\n        };\n      }\n\n      // Not Found (404) - repo doesn't exist or no access\n      if (errorMessage.includes('not found') || errorMessage.includes('404')) {\n        return {\n          success: false,\n          message: ERROR_MESSAGES.REPO_NOT_FOUND(config.repository),\n        };\n      }\n\n      // Rate Limited (403)\n      if (errorMessage.includes('rate limit') || errorMessage.includes('403')) {\n        return {\n          success: false,\n          message: ERROR_MESSAGES.RATE_LIMITED,\n        };\n      }\n\n      // Network errors\n      if (\n        errorMessage.includes('enotfound') ||\n        errorMessage.includes('econnrefused') ||\n        errorMessage.includes('network')\n      ) {\n        return {\n          success: false,\n          message: ERROR_MESSAGES.NETWORK_ERROR(error.message),\n        };\n      }\n\n      return {\n        success: false,\n        message: ERROR_MESSAGES.INTERNAL_ERROR(error.message),\n      };\n    }\n\n    return {\n      success: false,\n      message: ERROR_MESSAGES.INTERNAL_ERROR('Unknown error occurred'),\n    };\n  }\n}\n\n/**\n * Validates a bug report payload\n */\nexport function validateBugReport(\n  payload: unknown\n): { success: true; data: ValidatedBugReport } | { success: false; error: string } {\n  const result = BugReportSchema.safeParse(payload);\n\n  if (result.success) {\n    return { success: true, data: result.data };\n  }\n\n  const errorMessages = result.error.errors\n    .map((e) => `${e.path.join('.')}: ${e.message}`)\n    .join(', ');\n\n  return { success: false, error: errorMessages };\n}\n\n/**\n * Core handler logic - framework agnostic\n * Use this with any backend framework\n */\nexport async function handleBugReport(\n  body: unknown,\n  config: IssueCreatorConfig\n): Promise<{ status: number; body: BugReportResponse | { success: false; message: string } }> {\n  const validation = validateBugReport(body);\n\n  if (!validation.success) {\n    return {\n      status: 400,\n      body: { success: false, message: validation.error },\n    };\n  }\n\n  const result = await createGitHubIssue(validation.data, config);\n\n  return {\n    status: result.success ? 201 : 500,\n    body: result,\n  };\n}\n\n// ============================================\n// Framework-Specific Adapters\n// ============================================\n\n/**\n * Web Standards Fetch API handler (Next.js App Router, Hono, Bun, Deno, Cloudflare Workers)\n *\n * @example\n * ```ts\n * // Next.js App Router: app/api/inner-lens/report/route.ts\n * import { createFetchHandler } from 'inner-lens/server';\n *\n * export const POST = createFetchHandler({\n *   githubToken: process.env.GITHUB_TOKEN!,\n *   repository: 'owner/repo',\n * });\n * ```\n *\n * @example\n * ```ts\n * // Hono\n * import { Hono } from 'hono';\n * import { createFetchHandler } from 'inner-lens/server';\n *\n * const app = new Hono();\n * const handler = createFetchHandler({ ... });\n *\n * app.post('/api/inner-lens/report', (c) => handler(c.req.raw));\n * ```\n */\nexport function createFetchHandler(config: IssueCreatorConfig) {\n  return async (request: Request): Promise<Response> => {\n    try {\n      const body = await request.json();\n      const result = await handleBugReport(body, config);\n\n      return Response.json(result.body, { status: result.status });\n    } catch (error) {\n      const message =\n        error instanceof Error ? error.message : 'Internal server error';\n      return Response.json({ success: false, message }, { status: 500 });\n    }\n  };\n}\n\n// Alias for backwards compatibility\nexport const createReportHandler = createFetchHandler;\n\n/**\n * Express/Connect middleware\n *\n * @example\n * ```ts\n * import express from 'express';\n * import { createExpressHandler } from 'inner-lens/server';\n *\n * const app = express();\n * app.use(express.json());\n *\n * app.post('/api/inner-lens/report', createExpressHandler({\n *   githubToken: process.env.GITHUB_TOKEN!,\n *   repository: 'owner/repo',\n * }));\n * ```\n */\nexport function createExpressHandler(config: IssueCreatorConfig) {\n  return async (\n    req: { body: unknown },\n    res: { status: (code: number) => { json: (body: unknown) => void } }\n  ): Promise<void> => {\n    try {\n      const result = await handleBugReport(req.body, config);\n      res.status(result.status).json(result.body);\n    } catch (error) {\n      const message =\n        error instanceof Error ? error.message : 'Internal server error';\n      res.status(500).json({ success: false, message });\n    }\n  };\n}\n\n/**\n * Fastify handler\n *\n * @example\n * ```ts\n * import Fastify from 'fastify';\n * import { createFastifyHandler } from 'inner-lens/server';\n *\n * const fastify = Fastify();\n *\n * fastify.post('/api/inner-lens/report', createFastifyHandler({\n *   githubToken: process.env.GITHUB_TOKEN!,\n *   repository: 'owner/repo',\n * }));\n * ```\n */\nexport function createFastifyHandler(config: IssueCreatorConfig) {\n  return async (\n    request: { body: unknown },\n    reply: { status: (code: number) => { send: (body: unknown) => void } }\n  ): Promise<void> => {\n    try {\n      const result = await handleBugReport(request.body, config);\n      reply.status(result.status).send(result.body);\n    } catch (error) {\n      const message =\n        error instanceof Error ? error.message : 'Internal server error';\n      reply.status(500).send({ success: false, message });\n    }\n  };\n}\n\n/**\n * Koa middleware\n *\n * @example\n * ```ts\n * import Koa from 'koa';\n * import bodyParser from 'koa-bodyparser';\n * import { createKoaHandler } from 'inner-lens/server';\n *\n * const app = new Koa();\n * app.use(bodyParser());\n *\n * const handler = createKoaHandler({\n *   githubToken: process.env.GITHUB_TOKEN!,\n *   repository: 'owner/repo',\n * });\n *\n * app.use(async (ctx, next) => {\n *   if (ctx.path === '/api/inner-lens/report' && ctx.method === 'POST') {\n *     await handler(ctx);\n *   } else {\n *     await next();\n *   }\n * });\n * ```\n */\nexport function createKoaHandler(config: IssueCreatorConfig) {\n  return async (ctx: {\n    request: { body: unknown };\n    status: number;\n    body: unknown;\n  }): Promise<void> => {\n    try {\n      const result = await handleBugReport(ctx.request.body, config);\n      ctx.status = result.status;\n      ctx.body = result.body;\n    } catch (error) {\n      const message =\n        error instanceof Error ? error.message : 'Internal server error';\n      ctx.status = 500;\n      ctx.body = { success: false, message };\n    }\n  };\n}\n\n/**\n * Generic Node.js HTTP handler (http/https modules)\n *\n * @example\n * ```ts\n * import http from 'http';\n * import { createNodeHandler } from 'inner-lens/server';\n *\n * const handler = createNodeHandler({\n *   githubToken: process.env.GITHUB_TOKEN!,\n *   repository: 'owner/repo',\n * });\n *\n * const server = http.createServer(async (req, res) => {\n *   if (req.url === '/api/inner-lens/report' && req.method === 'POST') {\n *     await handler(req, res);\n *   }\n * });\n * ```\n */\nexport function createNodeHandler(config: IssueCreatorConfig) {\n  return async (\n    req: { on: (event: string, callback: (chunk: Buffer) => void) => void },\n    res: {\n      statusCode: number;\n      setHeader: (name: string, value: string) => void;\n      end: (body: string) => void;\n    }\n  ): Promise<void> => {\n    const chunks: Buffer[] = [];\n\n    return new Promise((resolve) => {\n      req.on('data', (chunk: Buffer) => chunks.push(chunk));\n      req.on('end', async () => {\n        try {\n          const bodyStr = Buffer.concat(chunks).toString();\n          const body = JSON.parse(bodyStr);\n          const result = await handleBugReport(body, config);\n\n          res.statusCode = result.status;\n          res.setHeader('Content-Type', 'application/json');\n          res.end(JSON.stringify(result.body));\n        } catch (error) {\n          const message =\n            error instanceof Error ? error.message : 'Internal server error';\n          res.statusCode = 500;\n          res.setHeader('Content-Type', 'application/json');\n          res.end(JSON.stringify({ success: false, message }));\n        }\n        resolve();\n      });\n    });\n  };\n}\n\n// Re-export types for convenience\nexport type {\n  BugReportPayload,\n  BugReportResponse,\n  GitHubIssuePayload,\n} from './types';\n\nexport { maskSensitiveData, maskSensitiveObject } from './utils/masking';\n"]}