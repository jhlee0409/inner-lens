{"version":3,"sources":["../src/types.ts","../src/utils/masking.ts","../src/utils/log-capture.ts","../src/utils/user-action-capture.ts","../src/utils/navigation-capture.ts","../src/utils/performance-capture.ts","../src/utils/session-replay.ts","../src/utils/styles.ts","../src/core/InnerLensCore.ts","../src/vanilla.ts"],"names":["WIDGET_TEXTS","HOSTED_API_ENDPOINT","MAX_LOG_ENTRIES","isInitialized","config","DEFAULT_CONFIG","InnerLensCore"],"mappings":"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","file":"vanilla.cjs","sourcesContent":["import type { ReactNode } from 'react';\n\n/**\n * AI Provider options for bug analysis\n */\nexport type AIProvider = 'anthropic' | 'openai' | 'google';\n\n/**\n * Supported languages for widget UI\n */\nexport type WidgetLanguage = 'en' | 'ko' | 'ja' | 'zh' | 'es';\n\n/**\n * Widget UI text strings for i18n\n */\nexport interface WidgetTexts {\n  buttonText: string;\n  dialogTitle: string;\n  dialogDescription: string;\n  placeholder: string;\n  submitText: string;\n  cancelText: string;\n  successMessage: string;\n  successDescription: string;\n  viewIssue: string;\n  capturedLogs: string;\n  entry: string;\n  entries: string;\n  privacyNotice: string;\n  submitting: string;\n  dailyLimitExceeded: string;\n  rateLimitExceeded: string;\n}\n\n/**\n * i18n text definitions for all supported languages\n */\nexport const WIDGET_TEXTS: Record<WidgetLanguage, WidgetTexts> = {\n  en: {\n    buttonText: 'Report a bug',\n    dialogTitle: 'Let us know what happened',\n    dialogDescription: 'What went wrong?',\n    placeholder: 'Tell us what you experienced. The more details, the better!',\n    submitText: 'Send Report',\n    cancelText: 'Close',\n    successMessage: 'Got it!',\n    successDescription: \"Thanks for letting us know. We'll look into this.\",\n    viewIssue: 'View on GitHub',\n    capturedLogs: 'Captured Logs',\n    entry: 'entry',\n    entries: 'entries',\n    privacyNotice: 'We collect clicks, navigation, and performance data. Sensitive info is automatically hidden.',\n    submitting: 'Sending...',\n    dailyLimitExceeded: 'Daily limit reached. Please try again tomorrow.',\n    rateLimitExceeded: 'Too many requests. Please wait a moment.',\n  },\n  ko: {\n    buttonText: ' ',\n    dialogTitle: ' ',\n    dialogDescription: '  ?',\n    placeholder: '  .  .',\n    submitText: '',\n    cancelText: '',\n    successMessage: ' ',\n    successDescription: ' !  .',\n    viewIssue: 'GitHub ',\n    capturedLogs: ' ',\n    entry: '',\n    entries: '',\n    privacyNotice: ',  ,   .    .',\n    submitting: ' ...',\n    dailyLimitExceeded: '  .   .',\n    rateLimitExceeded: '  .    .',\n  },\n  ja: {\n    buttonText: '',\n    dialogTitle: '',\n    dialogDescription: '',\n    placeholder: '',\n    submitText: '',\n    cancelText: '',\n    successMessage: '',\n    successDescription: '',\n    viewIssue: 'GitHub',\n    capturedLogs: '',\n    entry: '',\n    entries: '',\n    privacyNotice: '',\n    submitting: '...',\n    dailyLimitExceeded: '',\n    rateLimitExceeded: '',\n  },\n  zh: {\n    buttonText: '',\n    dialogTitle: '',\n    dialogDescription: '',\n    placeholder: '',\n    submitText: '',\n    cancelText: '',\n    successMessage: '',\n    successDescription: '',\n    viewIssue: ' GitHub ',\n    capturedLogs: '',\n    entry: '',\n    entries: '',\n    privacyNotice: '',\n    submitting: '...',\n    dailyLimitExceeded: '',\n    rateLimitExceeded: '',\n  },\n  es: {\n    buttonText: 'Reportar problema',\n    dialogTitle: 'Cuntanos qu pas',\n    dialogDescription: 'Qu problema encontraste?',\n    placeholder: 'Cuntanos qu ocurri. Cuantos ms detalles, mejor.',\n    submitText: 'Enviar',\n    cancelText: 'Cerrar',\n    successMessage: 'Recibido!',\n    successDescription: 'Gracias por avisarnos. Lo revisaremos pronto.',\n    viewIssue: 'Ver en GitHub',\n    capturedLogs: 'Logs capturados',\n    entry: 'entrada',\n    entries: 'entradas',\n    privacyNotice: 'Recopilamos clics, navegacin y datos de rendimiento. Los datos sensibles se ocultan automticamente.',\n    submitting: 'Enviando...',\n    dailyLimitExceeded: 'Lmite diario alcanzado. Por favor, intntalo maana.',\n    rateLimitExceeded: 'Demasiadas solicitudes. Por favor, espera un momento.',\n  },\n};\n\n/**\n * Configuration for the InnerLens Widget\n */\nexport interface InnerLensConfig {\n  /**\n   * API endpoint to submit bug reports\n   * @default HOSTED_API_ENDPOINT ('https://inner-lens-one.vercel.app/api/report')\n   */\n  endpoint?: string;\n\n  /**\n   * GitHub repository in format \"owner/repo\"\n   * Required for creating issues\n   */\n  repository?: string;\n\n  /**\n   * Custom labels to add to created issues\n   * @default ['inner-lens']\n   */\n  labels?: string[];\n\n  /**\n   * Enable/disable console log capture\n   * @default true\n   */\n  captureConsoleLogs?: boolean;\n\n  /**\n   * Maximum number of log entries to capture\n   * @default 50\n   */\n  maxLogEntries?: number;\n\n  /**\n   * Enable/disable sensitive data masking\n   * @default true\n   */\n  maskSensitiveData?: boolean;\n\n  // ============================================\n  // Extended Capture Options\n  // ============================================\n\n  /**\n   * Enable/disable user action tracking (clicks, inputs, etc.)\n   * @default true\n   */\n  captureUserActions?: boolean;\n\n  /**\n   * Enable/disable navigation tracking\n   * @default true\n   */\n  captureNavigation?: boolean;\n\n  /**\n   * Enable/disable performance metrics (Core Web Vitals)\n   * @default true\n   */\n  capturePerformance?: boolean;\n\n  /**\n   * Enable/disable session replay recording\n   * @default false (opt-in due to size)\n   */\n  captureSessionReplay?: boolean;\n\n  /**\n   * Custom CSS styles for the widget\n   */\n  styles?: {\n    buttonColor?: string;\n    buttonPosition?: 'bottom-right' | 'bottom-left' | 'top-right' | 'top-left';\n    buttonSize?: 'sm' | 'md' | 'lg';\n  };\n\n  /**\n   * Widget UI language\n   * @default 'en'\n   */\n  language?: WidgetLanguage;\n\n  // ============================================\n  // Convenience Options (top-level shortcuts)\n  // ============================================\n\n  /**\n   * Button position (convenience option, maps to styles.buttonPosition)\n   * @default 'bottom-right'\n   */\n  position?: 'bottom-right' | 'bottom-left' | 'top-right' | 'top-left';\n\n  /**\n   * Button color (convenience option, maps to styles.buttonColor)\n   * @default '#6366f1'\n   */\n  buttonColor?: string;\n\n  /**\n   * Button size (convenience option, maps to styles.buttonSize)\n   * @default 'lg'\n   */\n  buttonSize?: 'sm' | 'md' | 'lg';\n\n  // ============================================\n  // UI Text Customization\n  // ============================================\n\n  /**\n   * Trigger button aria-label and title\n   * @default 'Report a bug'\n   */\n  buttonText?: string;\n\n  /**\n   * Dialog title text\n   * @default 'Report an Issue'\n   */\n  dialogTitle?: string;\n\n  /**\n   * Textarea label text\n   * @default 'Describe the issue'\n   */\n  dialogDescription?: string;\n\n  /**\n   * Submit button text\n   * @default 'Submit Report'\n   */\n  submitText?: string;\n\n  /**\n   * Cancel button text\n   * @default 'Cancel'\n   */\n  cancelText?: string;\n\n  /**\n   * Success message title\n   * @default 'Report Submitted'\n   */\n  successMessage?: string;\n\n  // ============================================\n  // Callbacks\n  // ============================================\n\n  /**\n   * Callback when report is successfully submitted\n   */\n  onSuccess?: (issueUrl?: string) => void;\n\n  /**\n   * Callback when report submission fails\n   */\n  onError?: (error: Error) => void;\n\n  /**\n   * Callback when dialog opens\n   */\n  onOpen?: () => void;\n\n  /**\n   * Callback when dialog closes\n   */\n  onClose?: () => void;\n\n  /**\n   * Custom trigger element (replaces default button)\n   */\n  trigger?: ReactNode;\n\n  /**\n   * Hide the widget completely (not rendered)\n   * @default false\n   */\n  hidden?: boolean;\n\n  /**\n   * Disable the widget (button visible but inactive)\n   * @default false\n   */\n  disabled?: boolean;\n}\n\n/**\n * Captured log entry\n */\nexport interface LogEntry {\n  level: 'error' | 'warn' | 'info' | 'log';\n  message: string;\n  timestamp: number;\n  stack?: string;\n}\n\n// ============================================\n// User Action Types\n// ============================================\n\n/**\n * Types of user actions that can be captured\n */\nexport type UserActionType =\n  | 'click'\n  | 'dblclick'\n  | 'input'\n  | 'change'\n  | 'focus'\n  | 'blur'\n  | 'scroll'\n  | 'keydown'\n  | 'submit'\n  | 'copy'\n  | 'paste'\n  | 'select';\n\n/**\n * Captured user action entry\n */\nexport interface UserAction {\n  type: UserActionType;\n  target: string;\n  timestamp: number;\n  value?: string;\n  position?: { x: number; y: number };\n  key?: string;\n  metadata?: Record<string, unknown>;\n}\n\n// ============================================\n// Navigation Types\n// ============================================\n\n/**\n * Types of navigation events\n */\nexport type NavigationType =\n  | 'pageload'\n  | 'pushstate'\n  | 'replacestate'\n  | 'popstate'\n  | 'hashchange'\n  | 'beforeunload';\n\n/**\n * Navigation entry\n */\nexport interface NavigationEntry {\n  type: NavigationType;\n  timestamp: number;\n  from: string;\n  to: string;\n  duration?: number;\n  metadata?: Record<string, unknown>;\n}\n\n// ============================================\n// Performance Types\n// ============================================\n\n/**\n * Core Web Vitals metrics\n */\nexport interface CoreWebVitals {\n  /** Largest Contentful Paint (ms) */\n  LCP?: number;\n  /** First Input Delay (ms) */\n  FID?: number;\n  /** Cumulative Layout Shift */\n  CLS?: number;\n  /** Interaction to Next Paint (ms) */\n  INP?: number;\n  /** Time to First Byte (ms) */\n  TTFB?: number;\n  /** First Contentful Paint (ms) */\n  FCP?: number;\n}\n\n/**\n * Performance data summary\n */\nexport interface PerformanceSummary {\n  coreWebVitals: CoreWebVitals;\n  timing: {\n    domContentLoaded: number;\n    loadComplete: number;\n    timeToInteractive?: number;\n  };\n  resourceCount: number;\n  memoryUsage?: number;\n  score?: number;\n}\n\n// ============================================\n// Captured Context (Combined)\n// ============================================\n\n/**\n * Page context for better bug location identification\n */\nexport interface PageContext {\n  /** Current URL/route when bug occurred */\n  route: string;\n  /** URL path without query params */\n  pathname: string;\n  /** URL hash */\n  hash: string;\n  /** React component stack (from Error Boundary) */\n  componentStack?: string;\n  /** Document title */\n  title: string;\n  /** Time spent on current page (ms) */\n  timeOnPage: number;\n  /** Referrer URL */\n  referrer?: string;\n}\n\n/**\n * Complete captured context for bug reports\n */\nexport interface CapturedContext {\n  /** Console logs and network requests */\n  logs: LogEntry[];\n  /** User interaction trail */\n  userActions: UserAction[];\n  /** Page navigation history */\n  navigations: NavigationEntry[];\n  /** Performance metrics */\n  performance?: PerformanceSummary;\n  /** Session replay data (base64 encoded) */\n  sessionReplay?: string;\n  /** Current page context */\n  pageContext?: PageContext;\n}\n\n/**\n * Bug report payload sent to the server\n */\nexport interface BugReportPayload {\n  description: string;\n  logs: LogEntry[];\n  url: string;\n  userAgent: string;\n  timestamp: number;\n  metadata?: Record<string, unknown>;\n  // Centralized mode fields (for inner-lens API)\n  owner?: string;\n  repo?: string;\n  // Extended context\n  userActions?: UserAction[];\n  navigations?: NavigationEntry[];\n  performance?: PerformanceSummary;\n  sessionReplay?: string;\n  pageContext?: PageContext;\n}\n\n/**\n * Server response from bug report submission\n */\nexport interface BugReportResponse {\n  success: boolean;\n  issueUrl?: string;\n  issueNumber?: number;\n  message?: string;\n  remaining?: number;\n  dailyLimit?: number;\n  errorCode?: 'DAILY_LIMIT_EXCEEDED' | 'RATE_LIMIT_EXCEEDED';\n  resetAt?: number;\n}\n\n/**\n * GitHub Issue creation payload\n */\nexport interface GitHubIssuePayload {\n  title: string;\n  body: string;\n  labels: string[];\n  repository: string;\n}\n\n// ============================================\n// Shared Constants\n// ============================================\n\n/**\n * Hosted API endpoint for centralized mode\n * Users don't need to specify this - it's the default when repository is provided\n */\nexport const HOSTED_API_ENDPOINT =\n  'https://inner-lens-one.vercel.app/api/report';\n\n/**\n * Maximum number of log entries to keep\n * Used consistently across Core, Hosted API, and Self-hosted server\n */\nexport const MAX_LOG_ENTRIES = 50;\n\n// ============================================\n// Hosted API Types (Centralized Mode)\n// ============================================\n\n/**\n * Bug report payload for Hosted API (centralized mode)\n * Extends base payload with required owner/repo fields\n */\nexport interface HostedBugReportPayload {\n  // Required: Repository info\n  owner: string;\n  repo: string;\n\n  // Required: Bug details\n  description: string;\n\n  // Optional: Additional context\n  logs?: LogEntry[];\n  url?: string;\n  userAgent?: string;\n  timestamp?: number;\n  metadata?: Record<string, unknown>;\n\n  // Extended context (user actions, navigation, performance)\n  userActions?: UserAction[];\n  navigations?: NavigationEntry[];\n  performance?: PerformanceSummary;\n  sessionReplay?: string; // Base64 encoded rrweb data\n  pageContext?: PageContext;\n}\n","/**\n * Sensitive Data Masking Engine\n * Security-first approach to prevent PII leakage in bug reports\n */\n\ninterface MaskingPattern {\n  name: string;\n  pattern: RegExp;\n  replacement: string;\n}\n\n/**\n * Collection of regex patterns to detect and mask sensitive data\n */\nconst MASKING_PATTERNS: MaskingPattern[] = [\n  // Email addresses\n  {\n    name: 'email',\n    pattern: /\\b[\\w.-]+@[\\w.-]+\\.\\w{2,4}\\b/gi,\n    replacement: '[EMAIL_REDACTED]',\n  },\n  // Bearer tokens\n  {\n    name: 'bearer_token',\n    pattern: /Bearer\\s+[a-zA-Z0-9\\-._~+/]+=*/gi,\n    replacement: 'Bearer [TOKEN_REDACTED]',\n  },\n  // Generic API keys (common patterns)\n  {\n    name: 'api_key_param',\n    pattern: /(?:api[_-]?key|apikey|api[_-]?token)[=:][\"']?[a-zA-Z0-9\\-._~+/]{16,}[\"']?/gi,\n    replacement: 'api_key=[API_KEY_REDACTED]',\n  },\n  // Authorization headers\n  {\n    name: 'auth_header',\n    pattern: /(?:Authorization|X-API-Key|X-Auth-Token)[:\\s]+[\"']?[a-zA-Z0-9\\-._~+/]{8,}[\"']?/gi,\n    replacement: 'Authorization: [AUTH_REDACTED]',\n  },\n  // Credit card numbers (Visa, Mastercard, Amex, etc.)\n  {\n    name: 'credit_card',\n    pattern: /\\b(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|3[47][0-9]{13}|6(?:011|5[0-9]{2})[0-9]{12}|(?:2131|1800|35\\d{3})\\d{11})\\b/g,\n    replacement: '[CARD_REDACTED]',\n  },\n  // Credit card with spaces/dashes\n  {\n    name: 'credit_card_formatted',\n    pattern: /\\b(?:\\d{4}[-\\s]?){3}\\d{4}\\b/g,\n    replacement: '[CARD_REDACTED]',\n  },\n  // SSN (US Social Security Numbers)\n  {\n    name: 'ssn',\n    pattern: /\\b\\d{3}[-\\s]?\\d{2}[-\\s]?\\d{4}\\b/g,\n    replacement: '[SSN_REDACTED]',\n  },\n  // Phone numbers (various formats - US)\n  {\n    name: 'phone',\n    pattern: /\\b(?:\\+?1[-.\\s]?)?(?:\\(?[0-9]{3}\\)?[-.\\s]?)?[0-9]{3}[-.\\s]?[0-9]{4}\\b/g,\n    replacement: '[PHONE_REDACTED]',\n  },\n  // IPv4 addresses\n  {\n    name: 'ipv4',\n    pattern: /\\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\b/g,\n    replacement: '[IP_REDACTED]',\n  },\n  // IPv6 addresses (full and compressed forms)\n  {\n    name: 'ipv6',\n    pattern: /(?:[0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|(?:[0-9a-fA-F]{1,4}:)+:(?:[0-9a-fA-F]{1,4}:)*[0-9a-fA-F]{1,4}|::(?:[0-9a-fA-F]{1,4}:)*[0-9a-fA-F]{1,4}|::1/g,\n    replacement: '[IP_REDACTED]',\n  },\n  // AWS Access Keys\n  {\n    name: 'aws_key',\n    pattern: /(?:AKIA|ABIA|ACCA|ASIA)[A-Z0-9]{16}/g,\n    replacement: '[AWS_KEY_REDACTED]',\n  },\n  // AWS Secret Keys\n  {\n    name: 'aws_secret',\n    pattern: /(?:aws_secret_access_key|AWS_SECRET_ACCESS_KEY)[=:\\s]+[\"']?[a-zA-Z0-9/+=]{40}[\"']?/gi,\n    replacement: 'aws_secret_access_key=[AWS_SECRET_REDACTED]',\n  },\n  // GitHub tokens\n  {\n    name: 'github_token',\n    pattern: /(?:ghp|gho|ghu|ghs|ghr)_[a-zA-Z0-9]{36,}/g,\n    replacement: '[GITHUB_TOKEN_REDACTED]',\n  },\n  // OpenAI API keys\n  {\n    name: 'openai_key',\n    pattern: /sk-[a-zA-Z0-9]{20,}/g,\n    replacement: '[OPENAI_KEY_REDACTED]',\n  },\n  // Anthropic API keys\n  {\n    name: 'anthropic_key',\n    pattern: /sk-ant-[a-zA-Z0-9\\-]{20,}/g,\n    replacement: '[ANTHROPIC_KEY_REDACTED]',\n  },\n  // Google API keys\n  {\n    name: 'google_key',\n    pattern: /AIza[a-zA-Z0-9\\-_]{35}/g,\n    replacement: '[GOOGLE_KEY_REDACTED]',\n  },\n  // Stripe keys\n  {\n    name: 'stripe_key',\n    pattern: /(?:sk|pk)_(?:test|live)_[a-zA-Z0-9]{24,}/g,\n    replacement: '[STRIPE_KEY_REDACTED]',\n  },\n  // JWT tokens\n  {\n    name: 'jwt',\n    pattern: /eyJ[a-zA-Z0-9\\-_]+\\.eyJ[a-zA-Z0-9\\-_]+\\.[a-zA-Z0-9\\-_.+/=]*/g,\n    replacement: '[JWT_REDACTED]',\n  },\n  // Generic secrets in environment variable format\n  {\n    name: 'env_secret',\n    pattern: /(?:SECRET|PASSWORD|PASSWD|PWD|TOKEN|PRIVATE[_-]?KEY)[=:\\s]+[\"']?[^\\s\"']{8,}[\"']?/gi,\n    replacement: '[SECRET_REDACTED]',\n  },\n  // Database connection strings\n  {\n    name: 'database_url',\n    pattern: /(?:mongodb|mysql|postgresql|postgres|redis|amqp):\\/\\/[^\\s\"']+/gi,\n    replacement: '[DATABASE_URL_REDACTED]',\n  },\n  // Private keys (PEM format markers)\n  {\n    name: 'private_key',\n    pattern: /-----BEGIN (?:RSA |EC |DSA |OPENSSH )?PRIVATE KEY-----[\\s\\S]*?-----END (?:RSA |EC |DSA |OPENSSH )?PRIVATE KEY-----/g,\n    replacement: '[PRIVATE_KEY_REDACTED]',\n  },\n];\n\n/**\n * Masks sensitive data in the provided text\n * @param text - The text to mask\n * @returns The masked text with sensitive data redacted\n */\nexport function maskSensitiveData(text: string): string {\n  if (!text || typeof text !== 'string') {\n    return text;\n  }\n\n  let maskedText = text;\n\n  for (const { pattern, replacement } of MASKING_PATTERNS) {\n    maskedText = maskedText.replace(pattern, replacement);\n  }\n\n  return maskedText;\n}\n\n/**\n * Masks sensitive data in an object recursively\n * @param obj - The object to mask\n * @returns A new object with sensitive data masked\n */\nexport function maskSensitiveObject<T>(obj: T): T {\n  if (obj === null || obj === undefined) {\n    return obj;\n  }\n\n  if (typeof obj === 'string') {\n    return maskSensitiveData(obj) as T;\n  }\n\n  if (Array.isArray(obj)) {\n    return obj.map((item) => maskSensitiveObject(item)) as T;\n  }\n\n  if (typeof obj === 'object') {\n    const masked: Record<string, unknown> = {};\n    for (const [key, value] of Object.entries(obj)) {\n      // Also mask sensitive key names\n      const lowerKey = key.toLowerCase();\n      if (\n        lowerKey.includes('password') ||\n        lowerKey.includes('secret') ||\n        lowerKey.includes('token') ||\n        lowerKey.includes('apikey') ||\n        lowerKey.includes('api_key') ||\n        lowerKey.includes('private')\n      ) {\n        masked[key] = '[REDACTED]';\n      } else {\n        masked[key] = maskSensitiveObject(value);\n      }\n    }\n    return masked as T;\n  }\n\n  return obj;\n}\n\n/**\n * Validates that no obvious sensitive data remains\n * Returns true if text appears safe, false if potential leaks detected\n */\nexport function validateMasking(text: string): boolean {\n  // Check for common unmasked patterns\n  const dangerPatterns = [\n    /@.*\\.\\w{2,4}/i, // Emails\n    /sk-[a-z0-9]/i, // API keys\n    /eyJ[a-z0-9]/i, // JWTs\n    /AKIA[A-Z0-9]/i, // AWS\n    /ghp_[a-z0-9]/i, // GitHub\n  ];\n\n  for (const pattern of dangerPatterns) {\n    if (pattern.test(text)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n","/**\n * Console Log Capture Utility\n * Hooks into console methods to capture error and warning logs\n */\n\nimport type { LogEntry } from '../types';\nimport { maskSensitiveData } from './masking';\n\ntype LogLevel = 'error' | 'warn' | 'info' | 'log';\n\ninterface LogCaptureOptions {\n  maxEntries: number;\n  maskSensitiveData: boolean;\n}\n\n// Store for captured logs\nlet capturedLogs: LogEntry[] = [];\nlet isInitialized = false;\nlet originalConsole: Pick<Console, 'error' | 'warn' | 'info' | 'log'> | null = null;\nlet originalFetch: typeof fetch | null = null;\nlet captureOptions: LogCaptureOptions = {\n  maxEntries: 50,\n  maskSensitiveData: true,\n};\n\n// Maximum characters for response body truncation\nconst MAX_RESPONSE_BODY_LENGTH = 1000;\n\n/**\n * Formats console arguments into a string message\n */\nfunction formatLogMessage(args: unknown[]): string {\n  return args\n    .map((arg) => {\n      if (arg === null) return 'null';\n      if (arg === undefined) return 'undefined';\n      if (typeof arg === 'string') return arg;\n      if (arg instanceof Error) {\n        return `${arg.name}: ${arg.message}`;\n      }\n      try {\n        return JSON.stringify(arg, null, 2);\n      } catch {\n        return String(arg);\n      }\n    })\n    .join(' ');\n}\n\n/**\n * Extracts stack trace if available\n */\nfunction extractStack(args: unknown[]): string | undefined {\n  for (const arg of args) {\n    if (arg instanceof Error && arg.stack) {\n      return arg.stack;\n    }\n  }\n  return undefined;\n}\n\n/**\n * Creates a log entry from console arguments\n */\nfunction createLogEntry(level: LogLevel, args: unknown[]): LogEntry {\n  let message = formatLogMessage(args);\n  let stack = extractStack(args);\n\n  if (captureOptions.maskSensitiveData) {\n    message = maskSensitiveData(message);\n    if (stack) {\n      stack = maskSensitiveData(stack);\n    }\n  }\n\n  return {\n    level,\n    message,\n    timestamp: Date.now(),\n    stack,\n  };\n}\n\n/**\n * Adds a log entry to the captured logs\n */\nfunction addLogEntry(entry: LogEntry): void {\n  capturedLogs.push(entry);\n\n  // Keep only the most recent entries\n  if (capturedLogs.length > captureOptions.maxEntries) {\n    capturedLogs = capturedLogs.slice(-captureOptions.maxEntries);\n  }\n}\n\n/**\n * Truncates a string to the specified length\n */\nfunction truncateString(str: string, maxLength: number): string {\n  if (str.length <= maxLength) {\n    return str;\n  }\n  return str.slice(0, maxLength) + '... [TRUNCATED]';\n}\n\n/**\n * Safely extracts the request body from fetch input\n */\nfunction extractRequestBody(init?: RequestInit): string | undefined {\n  if (!init?.body) {\n    return undefined;\n  }\n\n  // Handle string body\n  if (typeof init.body === 'string') {\n    return init.body;\n  }\n\n  // Handle JSON-serializable objects (through body being stringified already)\n  // URLSearchParams, FormData, Blob, ArrayBuffer are not captured for simplicity\n  return undefined;\n}\n\n/**\n * Safely reads the response body as text\n */\nasync function safeReadResponseBody(response: Response): Promise<string> {\n  try {\n    // Clone to avoid consuming the original stream\n    const clonedResponse = response.clone();\n    const text = await clonedResponse.text();\n    return truncateString(text, MAX_RESPONSE_BODY_LENGTH);\n  } catch {\n    return '[Unable to read response body]';\n  }\n}\n\n/**\n * Creates a network log entry\n */\nfunction createNetworkLogEntry(\n  method: string,\n  url: string,\n  requestBody: string | undefined,\n  status: number,\n  responseBody: string,\n  duration: number\n): LogEntry {\n  const parts: string[] = [\n    `[NETWORK] ${method} ${url}`,\n    `Status: ${status}`,\n    `Duration: ${duration}ms`,\n  ];\n\n  if (requestBody) {\n    let maskedRequestBody = captureOptions.maskSensitiveData\n      ? maskSensitiveData(requestBody)\n      : requestBody;\n    maskedRequestBody = truncateString(maskedRequestBody, MAX_RESPONSE_BODY_LENGTH);\n    parts.push(`Request Body: ${maskedRequestBody}`);\n  }\n\n  let maskedResponseBody = captureOptions.maskSensitiveData\n    ? maskSensitiveData(responseBody)\n    : responseBody;\n  parts.push(`Response Body: ${maskedResponseBody}`);\n\n  const message = parts.join('\\n');\n\n  return {\n    level: status >= 400 ? 'error' : 'info',\n    message,\n    timestamp: Date.now(),\n  };\n}\n\n/**\n * Creates an intercepted fetch function\n */\nfunction createFetchInterceptor(): typeof fetch {\n  return async function interceptedFetch(\n    input: RequestInfo | URL,\n    init?: RequestInit\n  ): Promise<Response> {\n    const startTime = Date.now();\n\n    // Extract request details\n    let method = 'GET';\n    let url: string;\n\n    if (input instanceof Request) {\n      method = input.method;\n      url = input.url;\n    } else if (input instanceof URL) {\n      url = input.toString();\n    } else {\n      url = input;\n    }\n\n    if (init?.method) {\n      method = init.method;\n    }\n\n    const requestBody = extractRequestBody(init);\n\n    try {\n      // Call original fetch\n      const response = await originalFetch!(input, init);\n      const duration = Date.now() - startTime;\n\n      // Read response body (using clone to preserve original)\n      const responseBody = await safeReadResponseBody(response);\n\n      // Create and add log entry\n      const entry = createNetworkLogEntry(\n        method,\n        url,\n        requestBody,\n        response.status,\n        responseBody,\n        duration\n      );\n      addLogEntry(entry);\n\n      return response;\n    } catch (error) {\n      const duration = Date.now() - startTime;\n\n      // Log network errors\n      const errorMessage =\n        error instanceof Error ? error.message : String(error);\n      const entry = createNetworkLogEntry(\n        method,\n        url,\n        requestBody,\n        0,\n        `[Network Error: ${errorMessage}]`,\n        duration\n      );\n      entry.level = 'error';\n      addLogEntry(entry);\n\n      // Re-throw to not break the app\n      throw error;\n    }\n  };\n}\n\n/**\n * Initializes log capture by hooking into console methods\n */\nexport function initLogCapture(options?: Partial<LogCaptureOptions>): void {\n  if (typeof window === 'undefined') {\n    // Skip in SSR\n    return;\n  }\n\n  if (isInitialized) {\n    // Already initialized, just update options\n    if (options) {\n      captureOptions = { ...captureOptions, ...options };\n    }\n    return;\n  }\n\n  if (options) {\n    captureOptions = { ...captureOptions, ...options };\n  }\n\n  // Store original console methods\n  originalConsole = {\n    error: console.error.bind(console),\n    warn: console.warn.bind(console),\n    info: console.info.bind(console),\n    log: console.log.bind(console),\n  };\n\n  // Override console.error\n  console.error = (...args: unknown[]) => {\n    const entry = createLogEntry('error', args);\n    addLogEntry(entry);\n    originalConsole?.error(...args);\n  };\n\n  // Override console.warn\n  console.warn = (...args: unknown[]) => {\n    const entry = createLogEntry('warn', args);\n    addLogEntry(entry);\n    originalConsole?.warn(...args);\n  };\n\n  // Store original fetch and install interceptor\n  if (typeof window.fetch === 'function') {\n    originalFetch = window.fetch.bind(window);\n    window.fetch = createFetchInterceptor();\n  }\n\n  // Global error handler for uncaught errors\n  window.addEventListener('error', (event) => {\n    const entry = createLogEntry('error', [\n      `Uncaught Error: ${event.message} at ${event.filename}:${event.lineno}:${event.colno}`,\n    ]);\n    if (event.error?.stack) {\n      entry.stack = captureOptions.maskSensitiveData\n        ? maskSensitiveData(event.error.stack)\n        : event.error.stack;\n    }\n    addLogEntry(entry);\n  });\n\n  // Global handler for unhandled promise rejections\n  window.addEventListener('unhandledrejection', (event) => {\n    const reason = event.reason;\n    let message = 'Unhandled Promise Rejection';\n\n    if (reason instanceof Error) {\n      message = `Unhandled Promise Rejection: ${reason.message}`;\n    } else if (typeof reason === 'string') {\n      message = `Unhandled Promise Rejection: ${reason}`;\n    } else {\n      try {\n        message = `Unhandled Promise Rejection: ${JSON.stringify(reason)}`;\n      } catch {\n        message = `Unhandled Promise Rejection: ${String(reason)}`;\n      }\n    }\n\n    const entry = createLogEntry('error', [message]);\n    if (reason instanceof Error && reason.stack) {\n      entry.stack = captureOptions.maskSensitiveData\n        ? maskSensitiveData(reason.stack)\n        : reason.stack;\n    }\n    addLogEntry(entry);\n  });\n\n  isInitialized = true;\n}\n\n/**\n * Gets all captured logs\n */\nexport function getCapturedLogs(): LogEntry[] {\n  return [...capturedLogs];\n}\n\n/**\n * Clears all captured logs\n */\nexport function clearCapturedLogs(): void {\n  capturedLogs = [];\n}\n\n/**\n * Restores original console methods, fetch, and removes listeners\n */\nexport function restoreConsole(): void {\n  if (!isInitialized || !originalConsole) {\n    return;\n  }\n\n  console.error = originalConsole.error;\n  console.warn = originalConsole.warn;\n  console.info = originalConsole.info;\n  console.log = originalConsole.log;\n\n  // Restore original fetch if it was intercepted\n  if (originalFetch && typeof window !== 'undefined') {\n    window.fetch = originalFetch;\n    originalFetch = null;\n  }\n\n  originalConsole = null;\n  isInitialized = false;\n}\n\n/**\n * Manually adds a log entry (for custom integrations)\n */\nexport function addCustomLog(\n  level: LogLevel,\n  message: string,\n  stack?: string\n): void {\n  const entry: LogEntry = {\n    level,\n    message: captureOptions.maskSensitiveData\n      ? maskSensitiveData(message)\n      : message,\n    timestamp: Date.now(),\n    stack: stack\n      ? captureOptions.maskSensitiveData\n        ? maskSensitiveData(stack)\n        : stack\n      : undefined,\n  };\n  addLogEntry(entry);\n}\n","/**\n * User Action Capture Utility\n * Lightweight tracking of user interactions for AI analysis\n * More efficient than full session replay for bug analysis context\n */\n\nimport { maskSensitiveData } from './masking';\n\n/**\n * Types of user actions that can be captured\n */\nexport type UserActionType =\n  | 'click'\n  | 'dblclick'\n  | 'input'\n  | 'change'\n  | 'focus'\n  | 'blur'\n  | 'scroll'\n  | 'keydown'\n  | 'submit'\n  | 'copy'\n  | 'paste'\n  | 'select';\n\n/**\n * Captured user action entry\n */\nexport interface UserAction {\n  type: UserActionType;\n  target: string;\n  timestamp: number;\n  value?: string;\n  position?: { x: number; y: number };\n  key?: string;\n  metadata?: Record<string, unknown>;\n}\n\n/**\n * User action capture configuration\n */\nexport interface UserActionCaptureConfig {\n  /**\n   * Maximum number of actions to keep in buffer\n   * @default 50\n   */\n  maxActions?: number;\n\n  /**\n   * Enable/disable sensitive data masking\n   * @default true\n   */\n  maskSensitiveData?: boolean;\n\n  /**\n   * Actions to capture\n   * @default ['click', 'dblclick', 'input', 'change', 'submit', 'scroll']\n   */\n  captureActions?: UserActionType[];\n\n  /**\n   * Scroll throttle interval in ms\n   * @default 250\n   */\n  scrollThrottleMs?: number;\n\n  /**\n   * Input debounce interval in ms\n   * @default 300\n   */\n  inputDebounceMs?: number;\n\n  /**\n   * CSS selectors for elements to ignore\n   * @default []\n   */\n  ignoreSelectors?: string[];\n}\n\n// Module state\nlet isInitialized = false;\nlet capturedActions: UserAction[] = [];\nlet config: Required<UserActionCaptureConfig>;\nlet scrollTimeout: ReturnType<typeof setTimeout> | null = null;\nlet inputTimeouts: Map<string, ReturnType<typeof setTimeout>> = new Map();\nlet lastScrollTime = 0;\n\n// Event listeners for cleanup\nconst eventListeners: Array<{\n  target: EventTarget;\n  type: string;\n  handler: EventListener;\n  options?: AddEventListenerOptions;\n}> = [];\n\nconst DEFAULT_CONFIG: Required<UserActionCaptureConfig> = {\n  maxActions: 50,\n  maskSensitiveData: true,\n  captureActions: ['click', 'dblclick', 'input', 'change', 'submit', 'scroll'],\n  scrollThrottleMs: 250,\n  inputDebounceMs: 300,\n  ignoreSelectors: [],\n};\n\n/**\n * Generates a CSS selector path for an element\n */\nfunction getElementSelector(element: Element): string {\n  const parts: string[] = [];\n  let current: Element | null = element;\n\n  while (current && current !== document.body) {\n    let selector = current.tagName.toLowerCase();\n\n    // Add id if present\n    if (current.id) {\n      selector += `#${current.id}`;\n      parts.unshift(selector);\n      break; // ID is unique, no need to go further\n    }\n\n    // Add meaningful class names (filter out utility classes)\n    const meaningfulClasses = Array.from(current.classList)\n      .filter((cls) => !cls.match(/^(p-|m-|w-|h-|flex|grid|text-|bg-|border-)/))\n      .slice(0, 2);\n\n    if (meaningfulClasses.length > 0) {\n      selector += `.${meaningfulClasses.join('.')}`;\n    }\n\n    // Add data attributes for better identification\n    const dataTestId =\n      current.getAttribute('data-testid') ||\n      current.getAttribute('data-test-id');\n    if (dataTestId) {\n      selector += `[data-testid=\"${dataTestId}\"]`;\n    }\n\n    // Add name attribute for form elements\n    const name = current.getAttribute('name');\n    if (name && ['input', 'select', 'textarea'].includes(current.tagName.toLowerCase())) {\n      selector += `[name=\"${name}\"]`;\n    }\n\n    // Add aria-label for accessibility-labeled elements\n    const ariaLabel = current.getAttribute('aria-label');\n    if (ariaLabel) {\n      selector += `[aria-label=\"${ariaLabel.slice(0, 30)}\"]`;\n    }\n\n    parts.unshift(selector);\n    current = current.parentElement;\n\n    // Limit depth\n    if (parts.length >= 4) break;\n  }\n\n  return parts.join(' > ') || element.tagName.toLowerCase();\n}\n\n/**\n * Checks if element matches any ignore selector\n */\nfunction shouldIgnoreElement(element: Element): boolean {\n  return config.ignoreSelectors.some((selector) => {\n    try {\n      return element.matches(selector) || element.closest(selector) !== null;\n    } catch {\n      return false;\n    }\n  });\n}\n\n/**\n * Masks input value if needed\n */\nfunction maskValue(value: string, element: Element): string {\n  if (!config.maskSensitiveData) return value;\n\n  // Always mask password fields\n  if (\n    element instanceof HTMLInputElement &&\n    (element.type === 'password' || element.type === 'hidden')\n  ) {\n    return '[HIDDEN]';\n  }\n\n  // Check for sensitive field names\n  const name = element.getAttribute('name')?.toLowerCase() ?? '';\n  const id = element.id?.toLowerCase() ?? '';\n  const sensitivePatterns = [\n    'password',\n    'secret',\n    'token',\n    'api',\n    'key',\n    'credit',\n    'card',\n    'cvv',\n    'ssn',\n    'social',\n  ];\n\n  if (sensitivePatterns.some((p) => name.includes(p) || id.includes(p))) {\n    return '[SENSITIVE]';\n  }\n\n  // Apply general masking\n  return maskSensitiveData(value);\n}\n\n/**\n * Adds an action to the buffer\n */\nfunction addAction(action: UserAction): void {\n  capturedActions.push(action);\n\n  if (capturedActions.length > config.maxActions) {\n    capturedActions = capturedActions.slice(-config.maxActions);\n  }\n}\n\n/**\n * Registers an event listener with cleanup tracking\n */\nfunction addEventListener<K extends keyof DocumentEventMap>(\n  target: EventTarget,\n  type: K,\n  handler: (event: DocumentEventMap[K]) => void,\n  options?: AddEventListenerOptions\n): void {\n  target.addEventListener(type, handler as EventListener, options);\n  eventListeners.push({\n    target,\n    type,\n    handler: handler as EventListener,\n    options,\n  });\n}\n\n/**\n * Click/Double-click handler\n */\nfunction handleClick(event: MouseEvent): void {\n  const target = event.target as Element;\n  if (!target || shouldIgnoreElement(target)) return;\n\n  const action: UserAction = {\n    type: event.type === 'dblclick' ? 'dblclick' : 'click',\n    target: getElementSelector(target),\n    timestamp: Date.now(),\n    position: { x: event.clientX, y: event.clientY },\n  };\n\n  // Add button text or aria-label for context\n  const textContent = (target as HTMLElement).innerText?.slice(0, 50)?.trim();\n  const ariaLabel = target.getAttribute('aria-label');\n  if (textContent || ariaLabel) {\n    action.metadata = { label: textContent || ariaLabel };\n  }\n\n  addAction(action);\n}\n\n/**\n * Input handler with debounce\n */\nfunction handleInput(event: Event): void {\n  const target = event.target as Element;\n  if (!target || shouldIgnoreElement(target)) return;\n\n  const selector = getElementSelector(target);\n\n  // Clear existing timeout for this element\n  const existingTimeout = inputTimeouts.get(selector);\n  if (existingTimeout) {\n    clearTimeout(existingTimeout);\n  }\n\n  // Debounce input events\n  const timeout = setTimeout(() => {\n    const value =\n      (target as HTMLInputElement | HTMLTextAreaElement).value ?? '';\n    const maskedValue = maskValue(value, target);\n\n    addAction({\n      type: 'input',\n      target: selector,\n      timestamp: Date.now(),\n      value: maskedValue.slice(0, 100), // Limit value length\n    });\n\n    inputTimeouts.delete(selector);\n  }, config.inputDebounceMs);\n\n  inputTimeouts.set(selector, timeout);\n}\n\n/**\n * Change handler (for select, checkbox, radio)\n */\nfunction handleChange(event: Event): void {\n  const target = event.target as Element;\n  if (!target || shouldIgnoreElement(target)) return;\n\n  let value: string = '';\n\n  if (target instanceof HTMLSelectElement) {\n    value = target.options[target.selectedIndex]?.text ?? '';\n  } else if (target instanceof HTMLInputElement) {\n    if (target.type === 'checkbox' || target.type === 'radio') {\n      value = target.checked ? 'checked' : 'unchecked';\n    } else {\n      value = maskValue(target.value, target);\n    }\n  }\n\n  addAction({\n    type: 'change',\n    target: getElementSelector(target),\n    timestamp: Date.now(),\n    value: value.slice(0, 100),\n  });\n}\n\n/**\n * Scroll handler with throttle\n */\nfunction handleScroll(): void {\n  const now = Date.now();\n\n  if (now - lastScrollTime < config.scrollThrottleMs) {\n    // Throttle: schedule update at end of scroll\n    if (scrollTimeout) clearTimeout(scrollTimeout);\n    scrollTimeout = setTimeout(() => {\n      addScrollAction();\n    }, config.scrollThrottleMs);\n    return;\n  }\n\n  addScrollAction();\n  lastScrollTime = now;\n}\n\nfunction addScrollAction(): void {\n  addAction({\n    type: 'scroll',\n    target: 'window',\n    timestamp: Date.now(),\n    position: {\n      x: window.scrollX,\n      y: window.scrollY,\n    },\n    metadata: {\n      scrollHeight: document.documentElement.scrollHeight,\n      viewportHeight: window.innerHeight,\n      scrollPercent: Math.round(\n        (window.scrollY /\n          (document.documentElement.scrollHeight - window.innerHeight)) *\n          100\n      ),\n    },\n  });\n}\n\n/**\n * Submit handler\n */\nfunction handleSubmit(event: Event): void {\n  const target = event.target as Element;\n  if (!target || shouldIgnoreElement(target)) return;\n\n  addAction({\n    type: 'submit',\n    target: getElementSelector(target),\n    timestamp: Date.now(),\n    metadata: {\n      formAction: (target as HTMLFormElement).action,\n      formMethod: (target as HTMLFormElement).method,\n    },\n  });\n}\n\n/**\n * Focus handler\n */\nfunction handleFocus(event: FocusEvent): void {\n  const target = event.target as Element;\n  if (!target || shouldIgnoreElement(target)) return;\n\n  // Only track focus on interactive elements\n  const interactiveElements = ['input', 'textarea', 'select', 'button', 'a'];\n  if (!interactiveElements.includes(target.tagName.toLowerCase())) return;\n\n  addAction({\n    type: 'focus',\n    target: getElementSelector(target),\n    timestamp: Date.now(),\n  });\n}\n\n/**\n * Keydown handler (for special keys only)\n */\nfunction handleKeydown(event: KeyboardEvent): void {\n  const target = event.target as Element;\n  if (!target || shouldIgnoreElement(target)) return;\n\n  // Only capture special keys, not regular typing\n  const specialKeys = ['Enter', 'Escape', 'Tab', 'Backspace', 'Delete', 'ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'];\n  if (!specialKeys.includes(event.key)) return;\n\n  addAction({\n    type: 'keydown',\n    target: getElementSelector(target),\n    timestamp: Date.now(),\n    key: event.key,\n    metadata: {\n      ctrlKey: event.ctrlKey,\n      shiftKey: event.shiftKey,\n      altKey: event.altKey,\n      metaKey: event.metaKey,\n    },\n  });\n}\n\n/**\n * Copy/Paste handler\n */\nfunction handleClipboard(event: ClipboardEvent): void {\n  const target = event.target as Element;\n  if (!target || shouldIgnoreElement(target)) return;\n\n  addAction({\n    type: event.type as 'copy' | 'paste',\n    target: getElementSelector(target),\n    timestamp: Date.now(),\n    // Don't capture clipboard content for privacy\n  });\n}\n\n/**\n * Initialize user action capture\n */\nexport function initUserActionCapture(\n  userConfig: UserActionCaptureConfig = {}\n): void {\n  if (typeof window === 'undefined') return;\n\n  if (isInitialized) {\n    // Update config if already initialized\n    config = { ...config, ...userConfig };\n    return;\n  }\n\n  config = { ...DEFAULT_CONFIG, ...userConfig };\n\n  const actions = config.captureActions;\n\n  // Register event listeners based on config\n  if (actions.includes('click')) {\n    addEventListener(document, 'click', handleClick, { capture: true });\n  }\n\n  if (actions.includes('dblclick')) {\n    addEventListener(document, 'dblclick', handleClick, { capture: true });\n  }\n\n  if (actions.includes('input')) {\n    addEventListener(document, 'input', handleInput, { capture: true });\n  }\n\n  if (actions.includes('change')) {\n    addEventListener(document, 'change', handleChange, { capture: true });\n  }\n\n  if (actions.includes('scroll')) {\n    addEventListener(window, 'scroll', handleScroll, { passive: true });\n  }\n\n  if (actions.includes('submit')) {\n    addEventListener(document, 'submit', handleSubmit, { capture: true });\n  }\n\n  if (actions.includes('focus')) {\n    addEventListener(document, 'focusin', handleFocus, { capture: true });\n  }\n\n  if (actions.includes('keydown')) {\n    addEventListener(document, 'keydown', handleKeydown, { capture: true });\n  }\n\n  if (actions.includes('copy')) {\n    addEventListener(document, 'copy', handleClipboard, { capture: true });\n  }\n\n  if (actions.includes('paste')) {\n    addEventListener(document, 'paste', handleClipboard, { capture: true });\n  }\n\n  isInitialized = true;\n}\n\n/**\n * Get all captured user actions\n */\nexport function getCapturedUserActions(): UserAction[] {\n  return [...capturedActions];\n}\n\n/**\n * Get a summary of recent actions (for AI analysis)\n */\nexport function getUserActionsSummary(): {\n  total: number;\n  byType: Record<string, number>;\n  recentActions: UserAction[];\n  timeline: string;\n} {\n  const byType: Record<string, number> = {};\n\n  for (const action of capturedActions) {\n    byType[action.type] = (byType[action.type] ?? 0) + 1;\n  }\n\n  // Create a human-readable timeline\n  const timeline = capturedActions\n    .slice(-10)\n    .map((a) => {\n      const time = new Date(a.timestamp).toISOString().slice(11, 19);\n      let desc = `[${time}] ${a.type}: ${a.target}`;\n      if (a.value) desc += ` = \"${a.value}\"`;\n      if (a.key) desc += ` (${a.key})`;\n      return desc;\n    })\n    .join('\\n');\n\n  return {\n    total: capturedActions.length,\n    byType,\n    recentActions: capturedActions.slice(-10),\n    timeline,\n  };\n}\n\n/**\n * Clear all captured actions\n */\nexport function clearCapturedUserActions(): void {\n  capturedActions = [];\n}\n\n/**\n * Stop capturing and cleanup\n */\nexport function stopUserActionCapture(): void {\n  if (!isInitialized) return;\n\n  // Remove all event listeners\n  for (const { target, type, handler, options } of eventListeners) {\n    target.removeEventListener(type, handler, options);\n  }\n  eventListeners.length = 0;\n\n  // Clear timeouts\n  if (scrollTimeout) {\n    clearTimeout(scrollTimeout);\n    scrollTimeout = null;\n  }\n\n  for (const timeout of inputTimeouts.values()) {\n    clearTimeout(timeout);\n  }\n  inputTimeouts.clear();\n\n  isInitialized = false;\n}\n\n/**\n * Manually add a custom user action\n */\nexport function addCustomUserAction(\n  type: UserActionType,\n  target: string,\n  metadata?: Record<string, unknown>\n): void {\n  addAction({\n    type,\n    target,\n    timestamp: Date.now(),\n    metadata,\n  });\n}\n","/**\n * Navigation Capture Utility\n * Tracks page navigations, route changes, and browser history events\n */\n\nimport { maskSensitiveData } from './masking';\n\n/**\n * Types of navigation events\n */\nexport type NavigationType =\n  | 'pageload'\n  | 'pushstate'\n  | 'replacestate'\n  | 'popstate'\n  | 'hashchange'\n  | 'beforeunload';\n\n/**\n * Navigation entry\n */\nexport interface NavigationEntry {\n  type: NavigationType;\n  timestamp: number;\n  from: string;\n  to: string;\n  duration?: number;\n  metadata?: Record<string, unknown>;\n}\n\n/**\n * Navigation capture configuration\n */\nexport interface NavigationCaptureConfig {\n  /**\n   * Maximum number of navigation entries to keep\n   * @default 20\n   */\n  maxEntries?: number;\n\n  /**\n   * Enable/disable URL masking (removes query params with sensitive data)\n   * @default true\n   */\n  maskSensitiveData?: boolean;\n\n  /**\n   * Query parameters to always mask\n   * @default ['token', 'key', 'secret', 'password', 'auth', 'session']\n   */\n  sensitiveParams?: string[];\n\n  /**\n   * Track hash changes\n   * @default true\n   */\n  trackHashChanges?: boolean;\n\n  /**\n   * Callback on navigation\n   */\n  onNavigation?: (entry: NavigationEntry) => void;\n}\n\n// Module state\nlet isInitialized = false;\nlet capturedNavigations: NavigationEntry[] = [];\nlet config: Required<NavigationCaptureConfig>;\nlet currentUrl: string = '';\nlet pageLoadTime: number = 0;\n\n// Store original methods for restoration\nlet originalPushState: typeof history.pushState | null = null;\nlet originalReplaceState: typeof history.replaceState | null = null;\n\nconst DEFAULT_CONFIG: Required<NavigationCaptureConfig> = {\n  maxEntries: 20,\n  maskSensitiveData: true,\n  sensitiveParams: ['token', 'key', 'secret', 'password', 'auth', 'session', 'api_key', 'apikey', 'access_token'],\n  trackHashChanges: true,\n  onNavigation: () => {},\n};\n\n/**\n * Masks sensitive data in URL\n */\nfunction maskUrl(url: string): string {\n  if (!config.maskSensitiveData) return url;\n\n  try {\n    const urlObj = new URL(url, window.location.origin);\n\n    // Mask sensitive query parameters by name\n    for (const param of config.sensitiveParams) {\n      if (urlObj.searchParams.has(param)) {\n        urlObj.searchParams.set(param, '[REDACTED]');\n      }\n    }\n\n    // Also check for sensitive values in query params (e.g., JWT tokens, API keys)\n    for (const [key, value] of urlObj.searchParams.entries()) {\n      // Only mask if value looks like a secret (skip already redacted)\n      if (value !== '[REDACTED]') {\n        const maskedValue = maskSensitiveData(value);\n        if (maskedValue !== value) {\n          // Use the properly masked value to preserve pattern-specific redaction\n          urlObj.searchParams.set(key, maskedValue);\n        }\n      }\n    }\n\n    return urlObj.toString();\n  } catch {\n    // If URL parsing fails, apply general masking\n    return maskSensitiveData(url);\n  }\n}\n\n/**\n * Adds a navigation entry\n */\nfunction addNavigation(entry: NavigationEntry): void {\n  capturedNavigations.push(entry);\n\n  if (capturedNavigations.length > config.maxEntries) {\n    capturedNavigations = capturedNavigations.slice(-config.maxEntries);\n  }\n\n  config.onNavigation(entry);\n}\n\n/**\n * Handles pushState/replaceState\n */\nfunction createHistoryHandler(\n  type: 'pushstate' | 'replacestate',\n  original: typeof history.pushState\n): typeof history.pushState {\n  return function (\n    this: History,\n    data: unknown,\n    unused: string,\n    url?: string | URL | null\n  ): void {\n    const from = maskUrl(currentUrl);\n\n    // Call original method\n    original.call(this, data, unused, url);\n\n    const to = maskUrl(window.location.href);\n    currentUrl = window.location.href;\n\n    if (from !== to) {\n      addNavigation({\n        type,\n        timestamp: Date.now(),\n        from,\n        to,\n        metadata: {\n          stateData: typeof data === 'object' ? '[state object]' : data,\n        },\n      });\n    }\n  };\n}\n\n/**\n * Handles popstate events (back/forward navigation)\n */\nfunction handlePopState(_event: PopStateEvent): void {\n  const from = maskUrl(currentUrl);\n  const to = maskUrl(window.location.href);\n  currentUrl = window.location.href;\n\n  if (from !== to) {\n    addNavigation({\n      type: 'popstate',\n      timestamp: Date.now(),\n      from,\n      to,\n      metadata: {\n        historyLength: history.length,\n      },\n    });\n  }\n}\n\n/**\n * Handles hash changes\n */\nfunction handleHashChange(event: HashChangeEvent): void {\n  addNavigation({\n    type: 'hashchange',\n    timestamp: Date.now(),\n    from: maskUrl(event.oldURL),\n    to: maskUrl(event.newURL),\n  });\n}\n\n/**\n * Handles page unload\n */\nfunction handleBeforeUnload(): void {\n  addNavigation({\n    type: 'beforeunload',\n    timestamp: Date.now(),\n    from: maskUrl(currentUrl),\n    to: '[leaving page]',\n    duration: Date.now() - pageLoadTime,\n    metadata: {\n      timeOnPage: Date.now() - pageLoadTime,\n    },\n  });\n}\n\n/**\n * Initialize navigation capture\n */\nexport function initNavigationCapture(\n  userConfig: NavigationCaptureConfig = {}\n): void {\n  if (typeof window === 'undefined') return;\n\n  if (isInitialized) {\n    config = { ...config, ...userConfig };\n    return;\n  }\n\n  config = { ...DEFAULT_CONFIG, ...userConfig };\n  currentUrl = window.location.href;\n  pageLoadTime = Date.now();\n\n  // Record initial page load\n  addNavigation({\n    type: 'pageload',\n    timestamp: pageLoadTime,\n    from: document.referrer ? maskUrl(document.referrer) : '[direct]',\n    to: maskUrl(currentUrl),\n    metadata: {\n      referrer: document.referrer ? maskUrl(document.referrer) : null,\n      documentReadyState: document.readyState,\n    },\n  });\n\n  // Intercept pushState\n  originalPushState = history.pushState.bind(history);\n  history.pushState = createHistoryHandler('pushstate', originalPushState);\n\n  // Intercept replaceState\n  originalReplaceState = history.replaceState.bind(history);\n  history.replaceState = createHistoryHandler('replacestate', originalReplaceState);\n\n  // Listen for popstate (back/forward)\n  window.addEventListener('popstate', handlePopState);\n\n  // Listen for hash changes\n  if (config.trackHashChanges) {\n    window.addEventListener('hashchange', handleHashChange);\n  }\n\n  // Listen for page unload\n  window.addEventListener('beforeunload', handleBeforeUnload);\n\n  isInitialized = true;\n}\n\n/**\n * Get all captured navigations\n */\nexport function getCapturedNavigations(): NavigationEntry[] {\n  return [...capturedNavigations];\n}\n\n/**\n * Get navigation summary for AI analysis\n */\nexport function getNavigationSummary(): {\n  total: number;\n  pageLoadTime: number;\n  currentTimeOnPage: number;\n  navigationPath: string[];\n  byType: Record<string, number>;\n  timeline: string;\n} {\n  const byType: Record<string, number> = {};\n\n  for (const nav of capturedNavigations) {\n    byType[nav.type] = (byType[nav.type] ?? 0) + 1;\n  }\n\n  // Build navigation path (simplified)\n  const navigationPath = capturedNavigations.map((nav) => {\n    try {\n      const url = new URL(nav.to, window.location.origin);\n      return url.pathname + url.hash;\n    } catch {\n      return nav.to;\n    }\n  });\n\n  // Create timeline\n  const timeline = capturedNavigations\n    .map((nav) => {\n      const time = new Date(nav.timestamp).toISOString().slice(11, 19);\n      return `[${time}] ${nav.type}: ${nav.from}  ${nav.to}`;\n    })\n    .join('\\n');\n\n  return {\n    total: capturedNavigations.length,\n    pageLoadTime,\n    currentTimeOnPage: Date.now() - pageLoadTime,\n    navigationPath,\n    byType,\n    timeline,\n  };\n}\n\n/**\n * Clear all captured navigations\n */\nexport function clearCapturedNavigations(): void {\n  capturedNavigations = [];\n}\n\n/**\n * Stop capturing and restore original methods\n */\nexport function stopNavigationCapture(): void {\n  if (!isInitialized) return;\n\n  // Restore original history methods\n  if (originalPushState) {\n    history.pushState = originalPushState;\n    originalPushState = null;\n  }\n\n  if (originalReplaceState) {\n    history.replaceState = originalReplaceState;\n    originalReplaceState = null;\n  }\n\n  // Remove event listeners\n  window.removeEventListener('popstate', handlePopState);\n  window.removeEventListener('hashchange', handleHashChange);\n  window.removeEventListener('beforeunload', handleBeforeUnload);\n\n  isInitialized = false;\n}\n\n/**\n * Get current page info\n */\nexport function getCurrentPageInfo(): {\n  url: string;\n  path: string;\n  hash: string;\n  search: string;\n  timeOnPage: number;\n  referrer: string | null;\n} {\n  return {\n    url: maskUrl(window.location.href),\n    path: window.location.pathname,\n    hash: window.location.hash,\n    search: maskUrl(window.location.search),\n    timeOnPage: Date.now() - pageLoadTime,\n    referrer: document.referrer ? maskUrl(document.referrer) : null,\n  };\n}\n","/**\n * Performance Capture Utility\n * Captures Core Web Vitals and other performance metrics\n */\n\n/**\n * Core Web Vitals metrics\n */\nexport interface CoreWebVitals {\n  /**\n   * Largest Contentful Paint (ms)\n   * Good: < 2500ms, Needs Improvement: 2500-4000ms, Poor: > 4000ms\n   */\n  LCP?: number;\n\n  /**\n   * First Input Delay (ms)\n   * Good: < 100ms, Needs Improvement: 100-300ms, Poor: > 300ms\n   */\n  FID?: number;\n\n  /**\n   * Cumulative Layout Shift\n   * Good: < 0.1, Needs Improvement: 0.1-0.25, Poor: > 0.25\n   */\n  CLS?: number;\n\n  /**\n   * Interaction to Next Paint (ms)\n   * Good: < 200ms, Needs Improvement: 200-500ms, Poor: > 500ms\n   */\n  INP?: number;\n\n  /**\n   * Time to First Byte (ms)\n   * Good: < 800ms, Needs Improvement: 800-1800ms, Poor: > 1800ms\n   */\n  TTFB?: number;\n\n  /**\n   * First Contentful Paint (ms)\n   * Good: < 1800ms, Needs Improvement: 1800-3000ms, Poor: > 3000ms\n   */\n  FCP?: number;\n}\n\n/**\n * Resource timing entry summary\n */\nexport interface ResourceTiming {\n  name: string;\n  type: string;\n  duration: number;\n  size: number;\n  startTime: number;\n}\n\n/**\n * Memory info (Chrome only)\n */\nexport interface MemoryInfo {\n  usedJSHeapSize?: number;\n  totalJSHeapSize?: number;\n  jsHeapSizeLimit?: number;\n}\n\n/**\n * Complete performance data\n */\nexport interface PerformanceData {\n  coreWebVitals: CoreWebVitals;\n  timing: {\n    domContentLoaded: number;\n    loadComplete: number;\n    timeToInteractive?: number;\n  };\n  resources: {\n    total: number;\n    byType: Record<string, { count: number; totalSize: number; totalDuration: number }>;\n    slowest: ResourceTiming[];\n    largest: ResourceTiming[];\n  };\n  memory?: MemoryInfo;\n  connection?: {\n    effectiveType?: string;\n    downlink?: number;\n    rtt?: number;\n    saveData?: boolean;\n  };\n  timestamp: number;\n}\n\n/**\n * Performance capture configuration\n */\nexport interface PerformanceCaptureConfig {\n  /**\n   * Enable Core Web Vitals tracking\n   * @default true\n   */\n  trackCoreWebVitals?: boolean;\n\n  /**\n   * Enable resource timing tracking\n   * @default true\n   */\n  trackResources?: boolean;\n\n  /**\n   * Maximum number of slow/large resources to track\n   * @default 5\n   */\n  maxResourceEntries?: number;\n\n  /**\n   * Enable memory tracking (Chrome only)\n   * @default true\n   */\n  trackMemory?: boolean;\n\n  /**\n   * Callback when a metric is captured\n   */\n  onMetric?: (name: string, value: number) => void;\n}\n\n// Module state\nlet isInitialized = false;\nlet config: Required<PerformanceCaptureConfig>;\nlet metrics: CoreWebVitals = {};\nlet observers: PerformanceObserver[] = [];\n\nconst DEFAULT_CONFIG: Required<PerformanceCaptureConfig> = {\n  trackCoreWebVitals: true,\n  trackResources: true,\n  maxResourceEntries: 5,\n  trackMemory: true,\n  onMetric: () => {},\n};\n\n/**\n * Get rating for a metric value\n */\nfunction getMetricRating(\n  name: keyof CoreWebVitals,\n  value: number\n): 'good' | 'needs-improvement' | 'poor' {\n  const thresholds: Record<keyof CoreWebVitals, [number, number]> = {\n    LCP: [2500, 4000],\n    FID: [100, 300],\n    CLS: [0.1, 0.25],\n    INP: [200, 500],\n    TTFB: [800, 1800],\n    FCP: [1800, 3000],\n  };\n\n  const [good, poor] = thresholds[name] ?? [0, 0];\n\n  if (value <= good) return 'good';\n  if (value <= poor) return 'needs-improvement';\n  return 'poor';\n}\n\n/**\n * Creates and registers a PerformanceObserver\n */\nfunction createObserver(\n  type: string,\n  callback: (entries: PerformanceEntryList) => void\n): PerformanceObserver | null {\n  try {\n    const observer = new PerformanceObserver((list) => {\n      callback(list.getEntries());\n    });\n\n    observer.observe({ type, buffered: true });\n    observers.push(observer);\n    return observer;\n  } catch {\n    // Observer type not supported\n    return null;\n  }\n}\n\n/**\n * Initialize LCP tracking\n */\nfunction initLCP(): void {\n  createObserver('largest-contentful-paint', (entries) => {\n    const lastEntry = entries[entries.length - 1] as PerformanceEntry & {\n      startTime: number;\n    };\n    if (lastEntry) {\n      metrics.LCP = Math.round(lastEntry.startTime);\n      config.onMetric('LCP', metrics.LCP);\n    }\n  });\n}\n\n/**\n * Initialize FID tracking\n */\nfunction initFID(): void {\n  createObserver('first-input', (entries) => {\n    const firstEntry = entries[0] as PerformanceEntry & {\n      processingStart: number;\n      startTime: number;\n    };\n    if (firstEntry) {\n      metrics.FID = Math.round(firstEntry.processingStart - firstEntry.startTime);\n      config.onMetric('FID', metrics.FID);\n    }\n  });\n}\n\n/**\n * Initialize CLS tracking\n */\nfunction initCLS(): void {\n  let clsValue = 0;\n  let sessionValue = 0;\n  let sessionEntries: PerformanceEntry[] = [];\n\n  createObserver('layout-shift', (entries) => {\n    for (const entry of entries as Array<\n      PerformanceEntry & { hadRecentInput: boolean; value: number }\n    >) {\n      // Only count if there was no recent input\n      if (!entry.hadRecentInput) {\n        const firstSessionEntry = sessionEntries[0] as PerformanceEntry | undefined;\n        const lastSessionEntry = sessionEntries[sessionEntries.length - 1] as PerformanceEntry | undefined;\n\n        // Start new session if gap > 1s or session > 5s\n        if (\n          sessionEntries.length > 0 &&\n          firstSessionEntry &&\n          lastSessionEntry &&\n          (entry.startTime - lastSessionEntry.startTime > 1000 ||\n           entry.startTime - firstSessionEntry.startTime > 5000)\n        ) {\n          if (sessionValue > clsValue) {\n            clsValue = sessionValue;\n          }\n          sessionValue = 0;\n          sessionEntries = [];\n        }\n\n        sessionEntries.push(entry);\n        sessionValue += entry.value;\n      }\n    }\n\n    // Update with max of current session and previous max\n    metrics.CLS = Math.round(Math.max(clsValue, sessionValue) * 1000) / 1000;\n    config.onMetric('CLS', metrics.CLS);\n  });\n}\n\n/**\n * Initialize INP tracking\n */\nfunction initINP(): void {\n  const interactions: number[] = [];\n\n  createObserver('event', (entries) => {\n    for (const entry of entries as Array<\n      PerformanceEntry & { duration: number; interactionId?: number }\n    >) {\n      if (entry.interactionId) {\n        interactions.push(entry.duration);\n      }\n    }\n\n    if (interactions.length > 0) {\n      // INP is the 98th percentile of interactions\n      interactions.sort((a, b) => a - b);\n      const p98Index = Math.floor(interactions.length * 0.98);\n      metrics.INP = interactions[p98Index];\n      config.onMetric('INP', metrics.INP ?? 0);\n    }\n  });\n}\n\n/**\n * Initialize FCP tracking\n */\nfunction initFCP(): void {\n  createObserver('paint', (entries) => {\n    for (const entry of entries) {\n      if (entry.name === 'first-contentful-paint') {\n        metrics.FCP = Math.round(entry.startTime);\n        config.onMetric('FCP', metrics.FCP);\n      }\n    }\n  });\n}\n\n/**\n * Get TTFB from Navigation Timing\n */\nfunction getTTFB(): number | undefined {\n  const navigation = performance.getEntriesByType(\n    'navigation'\n  )[0] as PerformanceNavigationTiming | undefined;\n\n  if (navigation) {\n    const ttfb = Math.round(navigation.responseStart - navigation.requestStart);\n    metrics.TTFB = ttfb;\n    config.onMetric('TTFB', ttfb);\n    return ttfb;\n  }\n\n  return undefined;\n}\n\n/**\n * Initialize performance capture\n */\nexport function initPerformanceCapture(\n  userConfig: PerformanceCaptureConfig = {}\n): void {\n  if (typeof window === 'undefined' || typeof PerformanceObserver === 'undefined') {\n    return;\n  }\n\n  if (isInitialized) {\n    config = { ...config, ...userConfig };\n    return;\n  }\n\n  config = { ...DEFAULT_CONFIG, ...userConfig };\n\n  if (config.trackCoreWebVitals) {\n    initLCP();\n    initFID();\n    initCLS();\n    initINP();\n    initFCP();\n\n    // Get TTFB after page load\n    if (document.readyState === 'complete') {\n      getTTFB();\n    } else {\n      window.addEventListener('load', () => getTTFB(), { once: true });\n    }\n  }\n\n  isInitialized = true;\n}\n\n/**\n * Get current Core Web Vitals\n */\nexport function getCoreWebVitals(): CoreWebVitals {\n  return { ...metrics };\n}\n\n/**\n * Get Core Web Vitals with ratings\n */\nexport function getCoreWebVitalsWithRatings(): Record<\n  string,\n  { value: number; rating: string } | null\n> {\n  const result: Record<string, { value: number; rating: string } | null> = {};\n\n  for (const [key, value] of Object.entries(metrics)) {\n    if (value !== undefined) {\n      result[key] = {\n        value,\n        rating: getMetricRating(key as keyof CoreWebVitals, value),\n      };\n    } else {\n      result[key] = null;\n    }\n  }\n\n  return result;\n}\n\n/**\n * Get resource timing data\n */\nexport function getResourceTiming(): PerformanceData['resources'] {\n  if (!config?.trackResources) {\n    return {\n      total: 0,\n      byType: {},\n      slowest: [],\n      largest: [],\n    };\n  }\n\n  const resources = performance.getEntriesByType(\n    'resource'\n  ) as PerformanceResourceTiming[];\n\n  const byType: Record<\n    string,\n    { count: number; totalSize: number; totalDuration: number }\n  > = {};\n\n  const resourceTimings: ResourceTiming[] = [];\n\n  for (const resource of resources) {\n    const type = resource.initiatorType || 'other';\n    const size = resource.transferSize || 0;\n    const duration = resource.duration;\n\n    // Aggregate by type\n    if (!byType[type]) {\n      byType[type] = { count: 0, totalSize: 0, totalDuration: 0 };\n    }\n    byType[type].count++;\n    byType[type].totalSize += size;\n    byType[type].totalDuration += duration;\n\n    resourceTimings.push({\n      name: resource.name,\n      type,\n      duration: Math.round(duration),\n      size,\n      startTime: Math.round(resource.startTime),\n    });\n  }\n\n  // Get slowest resources\n  const slowest = [...resourceTimings]\n    .sort((a, b) => b.duration - a.duration)\n    .slice(0, config.maxResourceEntries);\n\n  // Get largest resources\n  const largest = [...resourceTimings]\n    .sort((a, b) => b.size - a.size)\n    .slice(0, config.maxResourceEntries);\n\n  return {\n    total: resources.length,\n    byType,\n    slowest,\n    largest,\n  };\n}\n\n/**\n * Get memory info (Chrome only)\n */\nexport function getMemoryInfo(): MemoryInfo | undefined {\n  if (!config?.trackMemory) return undefined;\n\n  // Chrome-specific memory API\n  const memory = (performance as Performance & { memory?: {\n    usedJSHeapSize: number;\n    totalJSHeapSize: number;\n    jsHeapSizeLimit: number;\n  } }).memory;\n\n  if (memory) {\n    return {\n      usedJSHeapSize: memory.usedJSHeapSize,\n      totalJSHeapSize: memory.totalJSHeapSize,\n      jsHeapSizeLimit: memory.jsHeapSizeLimit,\n    };\n  }\n\n  return undefined;\n}\n\n/**\n * Get connection info\n */\nexport function getConnectionInfo(): PerformanceData['connection'] {\n  const nav = navigator as Navigator & {\n    connection?: {\n      effectiveType?: string;\n      downlink?: number;\n      rtt?: number;\n      saveData?: boolean;\n    };\n  };\n\n  if (nav.connection) {\n    return {\n      effectiveType: nav.connection.effectiveType,\n      downlink: nav.connection.downlink,\n      rtt: nav.connection.rtt,\n      saveData: nav.connection.saveData,\n    };\n  }\n\n  return undefined;\n}\n\n/**\n * Get navigation timing data\n */\nexport function getNavigationTiming(): PerformanceData['timing'] {\n  const navigation = performance.getEntriesByType(\n    'navigation'\n  )[0] as PerformanceNavigationTiming | undefined;\n\n  if (navigation) {\n    return {\n      domContentLoaded: Math.round(navigation.domContentLoadedEventEnd),\n      loadComplete: Math.round(navigation.loadEventEnd),\n      timeToInteractive: Math.round(navigation.domInteractive),\n    };\n  }\n\n  // Fallback to legacy timing API\n  const timing = performance.timing;\n  if (timing) {\n    const navStart = timing.navigationStart;\n    return {\n      domContentLoaded: timing.domContentLoadedEventEnd - navStart,\n      loadComplete: timing.loadEventEnd - navStart,\n      timeToInteractive: timing.domInteractive - navStart,\n    };\n  }\n\n  return {\n    domContentLoaded: 0,\n    loadComplete: 0,\n  };\n}\n\n/**\n * Get complete performance data snapshot\n */\nexport function getPerformanceData(): PerformanceData {\n  return {\n    coreWebVitals: getCoreWebVitals(),\n    timing: getNavigationTiming(),\n    resources: getResourceTiming(),\n    memory: getMemoryInfo(),\n    connection: getConnectionInfo(),\n    timestamp: Date.now(),\n  };\n}\n\n/**\n * Get performance summary for AI analysis\n */\nexport function getPerformanceSummary(): {\n  vitals: Record<string, { value: number; rating: string } | null>;\n  issues: string[];\n  score: number;\n  summary: string;\n} {\n  const vitals = getCoreWebVitalsWithRatings();\n  const issues: string[] = [];\n  let totalScore = 0;\n  let metricCount = 0;\n\n  // Check each metric and identify issues\n  for (const [name, data] of Object.entries(vitals)) {\n    if (data) {\n      metricCount++;\n      if (data.rating === 'good') {\n        totalScore += 100;\n      } else if (data.rating === 'needs-improvement') {\n        totalScore += 50;\n        issues.push(`${name} needs improvement (${data.value})`);\n      } else {\n        issues.push(`${name} is poor (${data.value})`);\n      }\n    }\n  }\n\n  // Check for slow resources\n  const resources = getResourceTiming();\n  const slowResources = resources.slowest.filter((r) => r.duration > 1000);\n  if (slowResources.length > 0) {\n    issues.push(\n      `${slowResources.length} slow resource(s) (>1s): ${slowResources.map((r) => r.name.split('/').pop()).join(', ')}`\n    );\n  }\n\n  // Check memory (Chrome)\n  const memory = getMemoryInfo();\n  if (memory && memory.usedJSHeapSize && memory.jsHeapSizeLimit) {\n    const memoryUsagePercent =\n      (memory.usedJSHeapSize / memory.jsHeapSizeLimit) * 100;\n    if (memoryUsagePercent > 80) {\n      issues.push(`High memory usage (${Math.round(memoryUsagePercent)}%)`);\n    }\n  }\n\n  const score = metricCount > 0 ? Math.round(totalScore / metricCount) : 0;\n\n  // Generate summary\n  const timing = getNavigationTiming();\n  const summary = [\n    `Performance Score: ${score}/100`,\n    `Load Time: ${timing.loadComplete}ms`,\n    `DOM Interactive: ${timing.timeToInteractive ?? 'N/A'}ms`,\n    `Resources: ${resources.total} (${Object.entries(resources.byType).map(([t, d]) => `${t}: ${d.count}`).join(', ')})`,\n    issues.length > 0 ? `Issues: ${issues.join('; ')}` : 'No major issues',\n  ].join('\\n');\n\n  return {\n    vitals,\n    issues,\n    score,\n    summary,\n  };\n}\n\n/**\n * Stop capturing and cleanup observers\n */\nexport function stopPerformanceCapture(): void {\n  if (!isInitialized) return;\n\n  for (const observer of observers) {\n    observer.disconnect();\n  }\n  observers = [];\n\n  isInitialized = false;\n}\n\n/**\n * Reset metrics\n */\nexport function resetMetrics(): void {\n  metrics = {};\n}\n","/**\n * Session Replay Module using rrweb\n *\n * Provides consistent, framework-agnostic session recording\n * that captures DOM state regardless of console logging practices.\n */\n\nimport type { eventWithTime, recordOptions } from 'rrweb';\nimport type { listenerHandler } from '@rrweb/types';\n\n/**\n * Session replay configuration options\n */\nexport interface SessionReplayConfig {\n  /**\n   * Maximum duration to keep in buffer (in ms)\n   * @default 60000 (1 minute)\n   */\n  maxBufferDuration?: number;\n\n  /**\n   * Checkout interval for creating new snapshots (in ms)\n   * @default 30000 (30 seconds)\n   */\n  checkoutInterval?: number;\n\n  /**\n   * Enable/disable input masking for privacy\n   * @default true\n   */\n  maskInputs?: boolean;\n\n  /**\n   * CSS selectors for elements to block (hide completely)\n   */\n  blockSelectors?: string[];\n\n  /**\n   * CSS selectors for elements to mask (show placeholder)\n   */\n  maskSelectors?: string[];\n\n  /**\n   * Sampling configuration to reduce data size\n   */\n  sampling?: {\n    mousemove?: boolean | number;\n    mouseInteraction?: boolean;\n    scroll?: number;\n    media?: number;\n    input?: 'last' | 'all';\n  };\n\n  /**\n   * Callback when recording starts\n   */\n  onStart?: () => void;\n\n  /**\n   * Callback when recording stops\n   */\n  onStop?: () => void;\n\n  /**\n   * Callback on error\n   */\n  onError?: (error: Error) => void;\n}\n\n/**\n * Session replay data structure\n */\nexport interface SessionReplayData {\n  /**\n   * rrweb events array\n   */\n  events: eventWithTime[];\n\n  /**\n   * Recording start timestamp\n   */\n  startTime: number;\n\n  /**\n   * Recording end timestamp\n   */\n  endTime: number;\n\n  /**\n   * Duration in milliseconds\n   */\n  duration: number;\n\n  /**\n   * Approximate size in bytes\n   */\n  sizeBytes: number;\n\n  /**\n   * Number of events captured\n   */\n  eventCount: number;\n}\n\n/**\n * Session replay state\n */\ntype ReplayState = 'idle' | 'recording' | 'paused' | 'error';\n\n// Module state\nlet currentState: ReplayState = 'idle';\nlet stopFn: listenerHandler | null = null;\nlet eventsBuffer: eventWithTime[][] = [[]];\nlet recordingStartTime: number | null = null;\nlet config: Required<SessionReplayConfig>;\n\n// Default configuration\nconst DEFAULT_CONFIG: Required<SessionReplayConfig> = {\n  maxBufferDuration: 60000,\n  checkoutInterval: 30000,\n  maskInputs: true,\n  blockSelectors: [],\n  maskSelectors: ['.sensitive', '[data-sensitive]', '.pii'],\n  sampling: {\n    mousemove: 50, // Sample every 50ms\n    mouseInteraction: true,\n    scroll: 150, // Sample every 150ms\n    media: 800,\n    input: 'last',\n  },\n  onStart: () => {},\n  onStop: () => {},\n  onError: () => {},\n};\n\n/**\n * Dynamically imports rrweb to support tree-shaking\n */\nasync function loadRrweb() {\n  try {\n    const rrweb = await import('rrweb');\n    return rrweb;\n  } catch (error) {\n    throw new Error(\n      'Failed to load rrweb. Make sure it is installed: npm install rrweb'\n    );\n  }\n}\n\n/**\n * Initialize and start session recording\n */\nexport async function startSessionReplay(\n  userConfig: SessionReplayConfig = {}\n): Promise<void> {\n  if (typeof window === 'undefined') {\n    console.warn('Session replay is only available in browser environment');\n    return;\n  }\n\n  if (currentState === 'recording') {\n    console.warn('Session replay is already recording');\n    return;\n  }\n\n  config = { ...DEFAULT_CONFIG, ...userConfig };\n\n  try {\n    const { record } = await loadRrweb();\n\n    eventsBuffer = [[]];\n    recordingStartTime = Date.now();\n    currentState = 'recording';\n\n    const recordOptions: recordOptions<eventWithTime> = {\n      emit: (event: eventWithTime, isCheckout?: boolean) => {\n        if (isCheckout) {\n          // Start new events array on checkout\n          eventsBuffer.push([]);\n          // Keep only recent buffers based on maxBufferDuration\n          const maxBuffers = Math.ceil(\n            config.maxBufferDuration / config.checkoutInterval\n          );\n          if (eventsBuffer.length > maxBuffers + 1) {\n            eventsBuffer.shift();\n          }\n        }\n        const currentBuffer = eventsBuffer[eventsBuffer.length - 1];\n        if (currentBuffer) {\n          currentBuffer.push(event);\n        }\n      },\n      checkoutEveryNms: config.checkoutInterval,\n      maskAllInputs: config.maskInputs,\n      blockSelector: config.blockSelectors.join(', ') || undefined,\n      maskTextSelector: config.maskSelectors.join(', ') || undefined,\n      sampling: config.sampling,\n      // Privacy: don't record cross-origin iframes\n      recordCrossOriginIframes: false,\n      // Collect fonts for accurate replay\n      collectFonts: true,\n      // Inline styles for self-contained replay\n      inlineStylesheet: true,\n      // Inline images as base64 (careful with size)\n      inlineImages: false,\n    };\n\n    stopFn = record(recordOptions) ?? null;\n    config.onStart();\n  } catch (error) {\n    currentState = 'error';\n    const err = error instanceof Error ? error : new Error(String(error));\n    config.onError(err);\n    throw err;\n  }\n}\n\n/**\n * Stop session recording and return captured data\n */\nexport function stopSessionReplay(): SessionReplayData | null {\n  if (currentState !== 'recording' || !stopFn) {\n    console.warn('Session replay is not recording');\n    return null;\n  }\n\n  stopFn();\n  stopFn = null;\n  currentState = 'idle';\n\n  const endTime = Date.now();\n  const events = eventsBuffer.flat();\n  const eventsJson = JSON.stringify(events);\n\n  const data: SessionReplayData = {\n    events,\n    startTime: recordingStartTime ?? endTime,\n    endTime,\n    duration: endTime - (recordingStartTime ?? endTime),\n    sizeBytes: new Blob([eventsJson]).size,\n    eventCount: events.length,\n  };\n\n  config.onStop();\n  recordingStartTime = null;\n  eventsBuffer = [[]];\n\n  return data;\n}\n\n/**\n * Get current session replay data without stopping\n */\nexport function getSessionReplaySnapshot(): SessionReplayData | null {\n  if (currentState !== 'recording') {\n    return null;\n  }\n\n  const now = Date.now();\n  const events = eventsBuffer.flat();\n  const eventsJson = JSON.stringify(events);\n\n  return {\n    events,\n    startTime: recordingStartTime ?? now,\n    endTime: now,\n    duration: now - (recordingStartTime ?? now),\n    sizeBytes: new Blob([eventsJson]).size,\n    eventCount: events.length,\n  };\n}\n\n/**\n * Check if session replay is currently recording\n */\nexport function isRecording(): boolean {\n  return currentState === 'recording';\n}\n\n/**\n * Get current recording state\n */\nexport function getRecordingState(): ReplayState {\n  return currentState;\n}\n\n/**\n * Compress events data for transmission\n * Uses browser's built-in CompressionStream if available\n */\nexport async function compressReplayData(\n  data: SessionReplayData\n): Promise<Blob> {\n  const jsonString = JSON.stringify(data.events);\n  const blob = new Blob([jsonString], { type: 'application/json' });\n\n  // Check for CompressionStream support\n  if (typeof CompressionStream !== 'undefined') {\n    const stream = blob.stream().pipeThrough(new CompressionStream('gzip'));\n    return new Response(stream).blob();\n  }\n\n  // Fallback: return uncompressed\n  return blob;\n}\n\n/**\n * Create a replay player URL (for debugging)\n * Encodes events as base64 in URL hash\n */\nexport function createReplayUrl(data: SessionReplayData): string {\n  const eventsJson = JSON.stringify(data.events);\n\n  // For small replays, encode in URL\n  if (eventsJson.length < 50000) {\n    const encoded = btoa(encodeURIComponent(eventsJson));\n    return `https://rrweb.io/player?events=${encoded}`;\n  }\n\n  // For larger replays, suggest using the player separately\n  return 'https://rrweb.io/player (events too large for URL)';\n}\n\n/**\n * Estimate quality score based on captured data\n */\nexport function calculateReplayQualityScore(data: SessionReplayData): {\n  score: number;\n  factors: Record<string, { value: number; weight: number }>;\n} {\n  const factors: Record<string, { value: number; weight: number }> = {\n    hasFullSnapshot: {\n      value: data.events.some((e) => e.type === 2) ? 100 : 0, // type 2 = FullSnapshot\n      weight: 0.3,\n    },\n    hasMutations: {\n      value: data.events.some((e) => e.type === 3) ? 100 : 50, // type 3 = IncrementalSnapshot\n      weight: 0.2,\n    },\n    hasUserInteractions: {\n      value:\n        data.events.filter(\n          (e) =>\n            e.type === 3 &&\n            (e.data as { source?: number }).source !== undefined &&\n            [1, 2, 5].includes((e.data as { source: number }).source) // MouseInteraction, Scroll, Input\n        ).length > 0\n          ? 100\n          : 30,\n      weight: 0.25,\n    },\n    duration: {\n      value: Math.min(100, (data.duration / 5000) * 100), // 5+ seconds = full score\n      weight: 0.15,\n    },\n    eventDensity: {\n      value: Math.min(100, (data.eventCount / 50) * 100), // 50+ events = full score\n      weight: 0.1,\n    },\n  };\n\n  const score = Object.values(factors).reduce(\n    (sum, f) => sum + f.value * f.weight,\n    0\n  );\n\n  return { score: Math.round(score), factors };\n}\n\n// Export types\nexport type { eventWithTime } from 'rrweb';\n","/**\n * Inline Styles for InnerLens Widget\n * Zero dependency on external CSS libraries to prevent conflicts\n */\n\n// Framework-agnostic CSS properties type\ntype CSSStyleDeclaration = Record<string, string | number | undefined>;\n\nexport type ButtonSize = 'sm' | 'md' | 'lg';\n\nexport interface StyleConfig {\n  buttonColor?: string;\n  buttonPosition?: 'bottom-right' | 'bottom-left' | 'top-right' | 'top-left';\n  buttonSize?: ButtonSize;\n}\n\nconst getPositionStyles = (\n  position: StyleConfig['buttonPosition'] = 'bottom-right'\n): CSSStyleDeclaration => {\n  const base: CSSStyleDeclaration = { position: 'fixed', zIndex: 9999 };\n\n  switch (position) {\n    case 'bottom-left':\n      return { ...base, bottom: '20px', left: '20px' };\n    case 'top-right':\n      return { ...base, top: '20px', right: '20px' };\n    case 'top-left':\n      return { ...base, top: '20px', left: '20px' };\n    case 'bottom-right':\n    default:\n      return { ...base, bottom: '20px', right: '20px' };\n  }\n};\n\nconst BUTTON_SIZES: Record<ButtonSize, { button: string; icon: number }> = {\n  sm: { button: '40px', icon: 18 },\n  md: { button: '48px', icon: 20 },\n  lg: { button: '56px', icon: 24 },\n};\n\nexport const createStyles = (config?: StyleConfig) => {\n  const buttonColor = config?.buttonColor ?? '#6366f1';\n  const sizeConfig = BUTTON_SIZES[config?.buttonSize ?? 'lg'];\n\n  return {\n    triggerButton: {\n      ...getPositionStyles(config?.buttonPosition),\n      width: sizeConfig.button,\n      height: sizeConfig.button,\n      borderRadius: '50%',\n      backgroundColor: buttonColor,\n      color: '#ffffff',\n      border: 'none',\n      cursor: 'pointer',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      boxShadow: '0 4px 12px rgba(0, 0, 0, 0.15)',\n      transition: 'transform 0.2s ease, box-shadow 0.2s ease',\n      outline: 'none',\n    } as CSSStyleDeclaration,\n\n    iconSize: sizeConfig.icon,\n\n    triggerButtonHover: {\n      transform: 'scale(1.05)',\n      boxShadow: '0 6px 16px rgba(0, 0, 0, 0.2)',\n    } as CSSStyleDeclaration,\n\n    // Modal overlay\n    overlay: {\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      backgroundColor: 'rgba(0, 0, 0, 0.5)',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      zIndex: 10000,\n      padding: '20px',\n    } as CSSStyleDeclaration,\n\n    // Modal dialog\n    dialog: {\n      backgroundColor: '#ffffff',\n      borderRadius: '12px',\n      maxWidth: '500px',\n      width: '100%',\n      maxHeight: '80vh',\n      overflow: 'hidden',\n      display: 'flex',\n      flexDirection: 'column',\n      boxShadow: '0 20px 40px rgba(0, 0, 0, 0.2)',\n    } as CSSStyleDeclaration,\n\n    // Dialog header\n    header: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      padding: '16px 20px',\n      borderBottom: '1px solid #e5e7eb',\n    } as CSSStyleDeclaration,\n\n    headerTitle: {\n      margin: 0,\n      fontSize: '18px',\n      fontWeight: 600,\n      color: '#111827',\n      fontFamily:\n        '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n    } as CSSStyleDeclaration,\n\n    closeButton: {\n      background: 'none',\n      border: 'none',\n      cursor: 'pointer',\n      padding: '8px',\n      minWidth: '44px',\n      minHeight: '44px',\n      color: '#4b5563',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      borderRadius: '8px',\n      transition: 'background-color 0.15s ease',\n    } as CSSStyleDeclaration,\n\n    closeButtonHover: {\n      backgroundColor: '#f3f4f6',\n    } as CSSStyleDeclaration,\n\n    // Dialog content\n    content: {\n      padding: '20px',\n      overflowY: 'auto',\n      flex: 1,\n    } as CSSStyleDeclaration,\n\n    // Form elements\n    label: {\n      display: 'block',\n      marginBottom: '8px',\n      fontSize: '14px',\n      fontWeight: 500,\n      color: '#374151',\n      fontFamily:\n        '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n    } as CSSStyleDeclaration,\n\n    textarea: {\n      width: '100%',\n      minHeight: '120px',\n      padding: '12px',\n      border: '1px solid #d1d5db',\n      borderRadius: '8px',\n      fontSize: '14px',\n      fontFamily:\n        '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n      resize: 'vertical',\n      outline: 'none',\n      transition: 'border-color 0.15s ease, box-shadow 0.15s ease',\n      boxSizing: 'border-box',\n      color: '#111827',\n      backgroundColor: '#ffffff',\n    } as CSSStyleDeclaration,\n\n    textareaFocus: {\n      borderColor: buttonColor,\n      boxShadow: `0 0 0 3px ${buttonColor}20`,\n    } as CSSStyleDeclaration,\n\n    // Log preview\n    logPreview: {\n      marginTop: '16px',\n      padding: '12px',\n      backgroundColor: '#f9fafb',\n      borderRadius: '8px',\n      border: '1px solid #e5e7eb',\n    } as CSSStyleDeclaration,\n\n    logPreviewHeader: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      marginBottom: '8px',\n    } as CSSStyleDeclaration,\n\n    logPreviewTitle: {\n      fontSize: '12px',\n      fontWeight: 500,\n      color: '#4b5563',\n      textTransform: 'uppercase',\n      letterSpacing: '0.05em',\n      fontFamily:\n        '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n    } as CSSStyleDeclaration,\n\n    logCount: {\n      fontSize: '12px',\n      color: '#6b7280',\n      fontFamily:\n        '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n    } as CSSStyleDeclaration,\n\n    logList: {\n      maxHeight: '150px',\n      overflowY: 'auto',\n      fontFamily: 'ui-monospace, SFMono-Regular, \"SF Mono\", Menlo, monospace',\n      fontSize: '12px',\n    } as CSSStyleDeclaration,\n\n    logEntry: {\n      padding: '4px 0',\n      borderBottom: '1px solid #e5e7eb',\n      wordBreak: 'break-word',\n      color: '#374151',\n    } as CSSStyleDeclaration,\n\n    logError: {\n      color: '#dc2626',\n    } as CSSStyleDeclaration,\n\n    logWarn: {\n      color: '#d97706',\n    } as CSSStyleDeclaration,\n\n    // Footer with actions\n    footer: {\n      display: 'flex',\n      gap: '12px',\n      padding: '16px 20px',\n      borderTop: '1px solid #e5e7eb',\n      backgroundColor: '#f9fafb',\n    } as CSSStyleDeclaration,\n\n    submitButton: {\n      flex: 1,\n      padding: '10px 16px',\n      backgroundColor: buttonColor,\n      color: '#ffffff',\n      border: 'none',\n      borderRadius: '8px',\n      fontSize: '14px',\n      fontWeight: 500,\n      cursor: 'pointer',\n      transition: 'background-color 0.15s ease, transform 0.1s ease',\n      fontFamily:\n        '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n    } as CSSStyleDeclaration,\n\n    submitButtonDisabled: {\n      opacity: 0.5,\n      cursor: 'not-allowed',\n    } as CSSStyleDeclaration,\n\n    cancelButton: {\n      padding: '10px 16px',\n      backgroundColor: '#ffffff',\n      color: '#374151',\n      border: '1px solid #d1d5db',\n      borderRadius: '8px',\n      fontSize: '14px',\n      fontWeight: 500,\n      cursor: 'pointer',\n      transition: 'background-color 0.15s ease',\n      fontFamily:\n        '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n    } as CSSStyleDeclaration,\n\n    // Success/Error states\n    successMessage: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      padding: '24px',\n      textAlign: 'center',\n    } as CSSStyleDeclaration,\n\n    successIcon: {\n      width: '48px',\n      height: '48px',\n      borderRadius: '50%',\n      backgroundColor: '#dcfce7',\n      color: '#16a34a',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      marginBottom: '16px',\n    } as CSSStyleDeclaration,\n\n    errorMessage: {\n      padding: '12px',\n      backgroundColor: '#fef2f2',\n      border: '1px solid #fecaca',\n      borderRadius: '8px',\n      color: '#dc2626',\n      fontSize: '14px',\n      marginTop: '12px',\n      fontFamily:\n        '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n    } as CSSStyleDeclaration,\n\n    // Loading spinner\n    spinner: {\n      display: 'inline-block',\n      width: '16px',\n      height: '16px',\n      border: '2px solid #ffffff',\n      borderTopColor: 'transparent',\n      borderRadius: '50%',\n      animation: 'inner-lens-spin 0.8s linear infinite',\n    } as CSSStyleDeclaration,\n\n    // Privacy notice\n    privacyNotice: {\n      marginTop: '16px',\n      padding: '12px',\n      backgroundColor: '#eff6ff',\n      borderRadius: '8px',\n      fontSize: '12px',\n      color: '#1e40af',\n      fontFamily:\n        '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n    } as CSSStyleDeclaration,\n  };\n};\n\n// CSS keyframes and responsive styles (injected once)\nexport const keyframesCSS = `\n@keyframes inner-lens-spin {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n\n/* Spinner class - ensures animation works regardless of inline style order */\n.inner-lens-spinner {\n  display: inline-block;\n  width: 16px;\n  height: 16px;\n  border: 2px solid #ffffff;\n  border-top-color: transparent;\n  border-radius: 50%;\n  animation: inner-lens-spin 0.8s linear infinite;\n}\n\n/* Reduced motion preference */\n@media (prefers-reduced-motion: reduce) {\n  #inner-lens-widget * {\n    animation-duration: 0.01ms !important;\n    animation-iteration-count: 1 !important;\n    transition-duration: 0.01ms !important;\n  }\n}\n\n/* Mobile responsive adjustments */\n@media (max-width: 640px) {\n  #inner-lens-widget [role=\"dialog\"] > div {\n    margin: 10px;\n    max-height: 90vh;\n  }\n}\n\n/* Focus visible for keyboard users */\n#inner-lens-widget button:focus-visible {\n  outline: 2px solid #6366f1;\n  outline-offset: 2px;\n}\n\n#inner-lens-widget textarea:focus-visible {\n  outline: 2px solid #6366f1;\n  outline-offset: 2px;\n}\n`;\n","/**\n * InnerLens Core Class\n * Framework-agnostic implementation of the bug reporting widget\n */\n\nimport type {\n  LogEntry,\n  BugReportPayload,\n  BugReportResponse,\n  WidgetLanguage,\n  UserAction,\n  NavigationEntry,\n  PerformanceSummary,\n  PageContext,\n} from '../types';\nimport { WIDGET_TEXTS, HOSTED_API_ENDPOINT } from '../types';\nimport {\n  initLogCapture,\n  getCapturedLogs,\n  clearCapturedLogs,\n  restoreConsole,\n} from '../utils/log-capture';\nimport {\n  initUserActionCapture,\n  getCapturedUserActions,\n  clearCapturedUserActions,\n  stopUserActionCapture,\n} from '../utils/user-action-capture';\nimport {\n  initNavigationCapture,\n  getCapturedNavigations,\n  clearCapturedNavigations,\n  stopNavigationCapture,\n} from '../utils/navigation-capture';\nimport {\n  initPerformanceCapture,\n  getPerformanceData,\n  stopPerformanceCapture,\n} from '../utils/performance-capture';\nimport {\n  startSessionReplay,\n  stopSessionReplay,\n  getSessionReplaySnapshot,\n  compressReplayData,\n  type SessionReplayData,\n} from '../utils/session-replay';\nimport { maskSensitiveData } from '../utils/masking';\nimport { createStyles, keyframesCSS, type StyleConfig } from '../utils/styles';\n\nexport interface InnerLensCoreConfig {\n  /**\n   * API endpoint to submit bug reports\n   * @default HOSTED_API_ENDPOINT (for hosted mode)\n   */\n  endpoint?: string;\n\n  /**\n   * GitHub repository in format \"owner/repo\"\n   */\n  repository?: string;\n\n  /**\n   * Custom labels to add to created issues\n   * @default ['inner-lens']\n   */\n  labels?: string[];\n\n  /**\n   * Enable/disable console log capture\n   * @default true\n   */\n  captureConsoleLogs?: boolean;\n\n  /**\n   * Maximum number of log entries to capture\n   * @default 50\n   */\n  maxLogEntries?: number;\n\n  /**\n   * Enable/disable sensitive data masking\n   * @default true\n   */\n  maskSensitiveData?: boolean;\n\n  // ============================================\n  // Extended Capture Options\n  // ============================================\n\n  /**\n   * Enable/disable user action tracking (clicks, inputs, etc.)\n   * @default true\n   */\n  captureUserActions?: boolean;\n\n  /**\n   * Enable/disable navigation tracking\n   * @default true\n   */\n  captureNavigation?: boolean;\n\n  /**\n   * Enable/disable performance metrics (Core Web Vitals)\n   * @default true\n   */\n  capturePerformance?: boolean;\n\n  /**\n   * Enable/disable session replay recording\n   * @default false (opt-in due to size)\n   */\n  captureSessionReplay?: boolean;\n\n  /**\n   * Custom CSS styles for the widget\n   */\n  styles?: StyleConfig;\n\n  /**\n   * Widget UI language\n   * @default 'en'\n   */\n  language?: WidgetLanguage;\n\n  // ============================================\n  // Convenience Options (mapped to styles)\n  // ============================================\n\n  /**\n   * Button position (convenience option, maps to styles.buttonPosition)\n   * @default 'bottom-right'\n   */\n  position?: 'bottom-right' | 'bottom-left' | 'top-right' | 'top-left';\n\n  /**\n   * Button color (convenience option, maps to styles.buttonColor)\n   * @default '#6366f1'\n   */\n  buttonColor?: string;\n\n  /**\n   * Button size (convenience option, maps to styles.buttonSize)\n   * @default 'lg'\n   */\n  buttonSize?: 'sm' | 'md' | 'lg';\n\n  // ============================================\n  // UI Text Customization\n  // ============================================\n\n  /**\n   * Trigger button aria-label and title\n   * @default 'Report a bug'\n   */\n  buttonText?: string;\n\n  /**\n   * Dialog title text\n   * @default 'Report an Issue'\n   */\n  dialogTitle?: string;\n\n  /**\n   * Textarea label text\n   * @default 'Describe the issue'\n   */\n  dialogDescription?: string;\n\n  /**\n   * Submit button text\n   * @default 'Submit Report'\n   */\n  submitText?: string;\n\n  /**\n   * Cancel button text\n   * @default 'Cancel'\n   */\n  cancelText?: string;\n\n  /**\n   * Success message title\n   * @default 'Report Submitted'\n   */\n  successMessage?: string;\n\n  // ============================================\n  // Callbacks\n  // ============================================\n\n  /**\n   * Callback when report is successfully submitted\n   */\n  onSuccess?: (issueUrl?: string) => void;\n\n  /**\n   * Callback when report submission fails\n   */\n  onError?: (error: Error) => void;\n\n  /**\n   * Callback when dialog opens\n   */\n  onOpen?: () => void;\n\n  /**\n   * Callback when dialog closes\n   */\n  onClose?: () => void;\n\n  hidden?: boolean;\n\n  disabled?: boolean;\n\n  /**\n   * Custom container element (defaults to document.body)\n   */\n  container?: HTMLElement;\n}\n\ntype SubmissionState = 'idle' | 'submitting' | 'success' | 'error';\n\n/**\n * InnerLens Core - Framework-agnostic bug reporting widget\n *\n * @example\n * ```ts\n * import { InnerLensCore } from 'inner-lens';\n *\n * const innerLens = new InnerLensCore({\n *   endpoint: '/api/bug-report',\n *   repository: 'owner/repo',\n * });\n *\n * innerLens.mount();\n * ```\n */\nexport class InnerLensCore {\n  private config: Required<\n    Pick<\n      InnerLensCoreConfig,\n      | 'endpoint'\n      | 'labels'\n      | 'captureConsoleLogs'\n      | 'maxLogEntries'\n      | 'maskSensitiveData'\n      | 'captureUserActions'\n      | 'captureNavigation'\n      | 'capturePerformance'\n      | 'captureSessionReplay'\n      | 'hidden'\n      | 'disabled'\n      | 'buttonText'\n      | 'dialogTitle'\n      | 'dialogDescription'\n      | 'submitText'\n      | 'cancelText'\n      | 'successMessage'\n    >\n  > &\n    InnerLensCoreConfig;\n\n  private container: HTMLElement | null = null;\n  private widgetRoot: HTMLElement | null = null;\n  private isOpen = false;\n  private submissionState: SubmissionState = 'idle';\n  private description = '';\n  private logs: LogEntry[] = [];\n  private userActions: UserAction[] = [];\n  private navigations: NavigationEntry[] = [];\n  private performance: PerformanceSummary | null = null;\n  private sessionReplayData: SessionReplayData | null = null;\n  private pageContext: PageContext | null = null;\n  private pageLoadTime: number = Date.now();\n  private errorMessage: string | null = null;\n  private issueUrl: string | null = null;\n  private styleElement: HTMLStyleElement | null = null;\n  private mounted = false;\n\n  constructor(config: InnerLensCoreConfig = {}) {\n    const mergedStyles: StyleConfig = {\n      ...config.styles,\n      buttonPosition: config.position ?? config.styles?.buttonPosition ?? 'bottom-right',\n      buttonColor: config.buttonColor ?? config.styles?.buttonColor ?? '#6366f1',\n      buttonSize: config.buttonSize ?? config.styles?.buttonSize ?? 'lg',\n    };\n\n    // Get i18n texts based on language\n    const lang = config.language ?? 'en';\n    const texts = WIDGET_TEXTS[lang] ?? WIDGET_TEXTS.en;\n\n    this.config = {\n      endpoint: HOSTED_API_ENDPOINT,\n      labels: ['inner-lens'],\n      captureConsoleLogs: true,\n      maxLogEntries: 50,\n      maskSensitiveData: true,\n      // Extended capture options\n      captureUserActions: true,\n      captureNavigation: true,\n      capturePerformance: true,\n      captureSessionReplay: false,\n      hidden: false,\n      disabled: false,\n      language: lang,\n      // UI Text defaults from i18n (can be overridden by config)\n      buttonText: texts.buttonText,\n      dialogTitle: texts.dialogTitle,\n      dialogDescription: texts.dialogDescription,\n      submitText: texts.submitText,\n      cancelText: texts.cancelText,\n      successMessage: texts.successMessage,\n      ...config,\n      styles: mergedStyles,\n    };\n  }\n\n  /**\n   * Get i18n texts for the current language\n   */\n  private getTexts() {\n    const lang = this.config.language ?? 'en';\n    return WIDGET_TEXTS[lang] ?? WIDGET_TEXTS.en;\n  }\n\n  private isHidden(): boolean {\n    return this.config.hidden === true;\n  }\n\n  private isDisabled(): boolean {\n    return this.config.disabled === true;\n  }\n\n  /**\n   * Mount the widget to the DOM\n   */\n  mount(container?: HTMLElement): void {\n    if (this.mounted || this.isHidden()) return;\n\n    if (typeof window === 'undefined') {\n      console.warn('InnerLens: Cannot mount in non-browser environment');\n      return;\n    }\n\n    this.container = container ?? this.config.container ?? document.body;\n\n    // Initialize log capture\n    if (this.config.captureConsoleLogs) {\n      initLogCapture({\n        maxEntries: this.config.maxLogEntries,\n        maskSensitiveData: this.config.maskSensitiveData,\n      });\n    }\n\n    // Initialize user action capture\n    if (this.config.captureUserActions) {\n      initUserActionCapture({\n        maskSensitiveData: this.config.maskSensitiveData,\n      });\n    }\n\n    // Initialize navigation capture\n    if (this.config.captureNavigation) {\n      initNavigationCapture({\n        maskSensitiveData: this.config.maskSensitiveData,\n      });\n    }\n\n    // Initialize performance capture\n    if (this.config.capturePerformance) {\n      initPerformanceCapture();\n    }\n\n    // Initialize session replay (async, non-blocking)\n    if (this.config.captureSessionReplay) {\n      startSessionReplay({\n        maskInputs: true,\n      }).catch((err) => {\n        console.warn('[inner-lens] Session replay failed to start:', err);\n      });\n    }\n\n    // Inject styles\n    this.injectStyles();\n\n    // Create widget root\n    this.widgetRoot = document.createElement('div');\n    this.widgetRoot.id = 'inner-lens-widget';\n    this.widgetRoot.setAttribute('data-inner-lens', 'true');\n    this.container.appendChild(this.widgetRoot);\n\n    // Render trigger button\n    this.renderTrigger();\n\n    // Setup keyboard listener\n    document.addEventListener('keydown', this.handleKeyDown);\n\n    this.mounted = true;\n  }\n\n  /**\n   * Unmount the widget from the DOM\n   */\n  unmount(): void {\n    if (!this.mounted) return;\n\n    document.removeEventListener('keydown', this.handleKeyDown);\n\n    // Stop all capture modules\n    if (this.config.captureConsoleLogs) {\n      restoreConsole();\n    }\n    if (this.config.captureUserActions) {\n      stopUserActionCapture();\n    }\n    if (this.config.captureNavigation) {\n      stopNavigationCapture();\n    }\n    if (this.config.capturePerformance) {\n      stopPerformanceCapture();\n    }\n    if (this.config.captureSessionReplay) {\n      stopSessionReplay();\n    }\n\n    if (this.widgetRoot) {\n      this.widgetRoot.remove();\n      this.widgetRoot = null;\n    }\n\n    if (this.styleElement) {\n      this.styleElement.remove();\n      this.styleElement = null;\n    }\n\n    this.mounted = false;\n  }\n\n  /**\n   * Programmatically open the dialog\n   */\n  open(): void {\n    if (this.isHidden() || !this.mounted) return;\n    this.isOpen = true;\n\n    // Collect all captured data\n    this.logs = getCapturedLogs();\n\n    if (this.config.captureUserActions) {\n      this.userActions = getCapturedUserActions();\n    }\n\n    if (this.config.captureNavigation) {\n      this.navigations = getCapturedNavigations();\n    }\n\n    if (this.config.capturePerformance) {\n      const perfData = getPerformanceData();\n      this.performance = {\n        coreWebVitals: perfData.coreWebVitals,\n        timing: perfData.timing,\n        resourceCount: perfData.resources.total,\n        memoryUsage: perfData.memory?.usedJSHeapSize,\n      };\n    }\n\n    if (this.config.captureSessionReplay) {\n      this.sessionReplayData = getSessionReplaySnapshot();\n    }\n\n    this.pageContext = this.capturePageContext();\n\n    this.render();\n    this.config.onOpen?.();\n  }\n\n  private capturePageContext(): PageContext {\n    return {\n      route: window.location.href,\n      pathname: window.location.pathname,\n      hash: window.location.hash,\n      title: document.title,\n      timeOnPage: Date.now() - this.pageLoadTime,\n      referrer: document.referrer || undefined,\n      componentStack: this.getReactComponentStack(),\n    };\n  }\n\n  private getReactComponentStack(): string | undefined {\n    const errorBoundaryStack = (window as Window & { __INNER_LENS_COMPONENT_STACK__?: string }).__INNER_LENS_COMPONENT_STACK__;\n    if (errorBoundaryStack) {\n      return errorBoundaryStack;\n    }\n\n    const reactRoot = document.getElementById('root') || document.getElementById('__next');\n    if (reactRoot) {\n      const fiberKey = Object.keys(reactRoot).find(key => key.startsWith('__reactFiber$'));\n      if (fiberKey) {\n        try {\n          const fiber = (reactRoot as unknown as Record<string, unknown>)[fiberKey] as { type?: { name?: string }; return?: unknown } | undefined;\n          const componentNames: string[] = [];\n          let current = fiber;\n          let depth = 0;\n          const MAX_DEPTH = 10;\n\n          while (current && depth < MAX_DEPTH) {\n            if (current.type && typeof current.type === 'function' && current.type.name) {\n              componentNames.push(current.type.name);\n            }\n            current = current.return as typeof fiber;\n            depth++;\n          }\n\n          if (componentNames.length > 0) {\n            return componentNames.reverse().join(' > ');\n          }\n        } catch {\n          return undefined;\n        }\n      }\n    }\n\n    return undefined;\n  }\n\n  /**\n   * Programmatically close the dialog\n   */\n  close(): void {\n    this.isOpen = false;\n    this.submissionState = 'idle';\n    this.errorMessage = null;\n    this.description = '';\n    this.issueUrl = null;\n    this.render();\n    this.config.onClose?.();\n  }\n\n  /**\n   * Check if widget is currently open\n   */\n  get isDialogOpen(): boolean {\n    return this.isOpen;\n  }\n\n  private handleKeyDown = (e: KeyboardEvent): void => {\n    if (e.key === 'Escape' && this.isOpen) {\n      this.close();\n      return;\n    }\n\n    // Focus trap: keep focus within dialog\n    if (e.key === 'Tab' && this.isOpen && this.widgetRoot) {\n      const dialog = this.widgetRoot.querySelector('#inner-lens-dialog');\n      if (!dialog) return;\n\n      const focusableElements = dialog.querySelectorAll<HTMLElement>(\n        'button, textarea, input, a[href], [tabindex]:not([tabindex=\"-1\"])'\n      );\n      const firstElement = focusableElements[0];\n      const lastElement = focusableElements[focusableElements.length - 1];\n\n      if (e.shiftKey && document.activeElement === firstElement) {\n        e.preventDefault();\n        lastElement?.focus();\n      } else if (!e.shiftKey && document.activeElement === lastElement) {\n        e.preventDefault();\n        firstElement?.focus();\n      }\n    }\n  };\n\n  private injectStyles(): void {\n    if (this.styleElement) return;\n\n    this.styleElement = document.createElement('style');\n    this.styleElement.textContent = keyframesCSS;\n    this.styleElement.setAttribute('data-inner-lens-styles', 'true');\n    document.head.appendChild(this.styleElement);\n  }\n\n  private renderTrigger(): void {\n    if (!this.widgetRoot) return;\n\n    const styles = createStyles(this.config.styles);\n    const iconSize = styles.iconSize as number;\n    const isDisabled = this.isDisabled();\n    const disabledStyles = isDisabled ? 'opacity: 0.5; cursor: not-allowed;' : '';\n\n    this.widgetRoot.innerHTML = `\n      <button\n        type=\"button\"\n        id=\"inner-lens-trigger\"\n        aria-label=\"${this.escapeHtml(this.config.buttonText)}\"\n        title=\"${this.escapeHtml(this.config.buttonText)}\"\n        ${isDisabled ? 'disabled' : ''}\n        style=\"${this.styleToString(styles.triggerButton)}${disabledStyles}\"\n      >\n        ${this.getBugIcon(iconSize)}\n      </button>\n    `;\n\n    const trigger = this.widgetRoot.querySelector('#inner-lens-trigger');\n    if (!isDisabled) {\n      trigger?.addEventListener('click', () => this.open());\n      trigger?.addEventListener('mouseenter', (e) => {\n        const btn = e.target as HTMLElement;\n        btn.style.transform = 'scale(1.05)';\n        btn.style.boxShadow = '0 6px 16px rgba(0, 0, 0, 0.2)';\n      });\n      trigger?.addEventListener('mouseleave', (e) => {\n        const btn = e.target as HTMLElement;\n        btn.style.transform = 'scale(1)';\n        btn.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.15)';\n      });\n    }\n  }\n\n  private render(): void {\n    if (!this.widgetRoot) return;\n\n    const styles = createStyles(this.config.styles);\n    const iconSize = styles.iconSize as number;\n\n    if (!this.isOpen) {\n      this.renderTrigger();\n      return;\n    }\n\n    const successContent = this.submissionState === 'success' ? this.renderSuccess(styles) : '';\n    const formContent = this.submissionState !== 'success' ? this.renderForm(styles) : '';\n\n    this.widgetRoot.innerHTML = `\n      <button\n        type=\"button\"\n        id=\"inner-lens-trigger\"\n        aria-label=\"${this.escapeHtml(this.config.buttonText)}\"\n        title=\"${this.escapeHtml(this.config.buttonText)}\"\n        style=\"${this.styleToString(styles.triggerButton)}\"\n      >\n        ${this.getBugIcon(iconSize)}\n      </button>\n      <div\n        id=\"inner-lens-overlay\"\n        role=\"dialog\"\n        aria-modal=\"true\"\n        aria-labelledby=\"inner-lens-title\"\n        style=\"${this.styleToString(styles.overlay)}\"\n      >\n        <div id=\"inner-lens-dialog\" style=\"${this.styleToString(styles.dialog)}\">\n          <div style=\"${this.styleToString(styles.header)}\">\n            <h2 id=\"inner-lens-title\" style=\"${this.styleToString(styles.headerTitle)}\">\n              ${this.escapeHtml(this.config.dialogTitle)}\n            </h2>\n            <button\n              type=\"button\"\n              id=\"inner-lens-close\"\n              aria-label=\"Close\"\n              style=\"${this.styleToString(styles.closeButton)}\"\n            >\n              ${this.getCloseIcon()}\n            </button>\n          </div>\n          ${successContent}\n          ${formContent}\n        </div>\n      </div>\n    `;\n\n    this.attachEventListeners(styles);\n  }\n\n  private renderSuccess(styles: ReturnType<typeof createStyles>): string {\n    const t = this.getTexts();\n    return `\n      <div style=\"${this.styleToString(styles.successMessage)}\" role=\"status\" aria-live=\"polite\">\n        <div style=\"${this.styleToString(styles.successIcon)}\" aria-hidden=\"true\">\n          ${this.getCheckIcon()}\n        </div>\n        <h3 style=\"${this.styleToString({ ...styles.headerTitle, marginBottom: '8px' })}\">\n          ${this.escapeHtml(this.config.successMessage ?? t.successMessage)}\n        </h3>\n        <p style=\"color: #4b5563; font-size: 14px; margin-bottom: 16px;\">\n          ${this.escapeHtml(t.successDescription)}\n        </p>\n        ${\n          this.issueUrl\n            ? `<a href=\"${this.issueUrl}\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: #6366f1; text-decoration: underline; font-size: 14px;\">\n                ${this.escapeHtml(t.viewIssue)}\n              </a>`\n            : ''\n        }\n      </div>\n    `;\n  }\n\n  private renderForm(styles: ReturnType<typeof createStyles>): string {\n    const t = this.getTexts();\n    const logsHtml = this.logs.length > 0 ? this.renderLogs(styles) : '';\n    const errorHtml =\n      this.submissionState === 'error' && this.errorMessage\n        ? `<div style=\"${this.styleToString(styles.errorMessage)}\">${this.escapeHtml(this.errorMessage)}</div>`\n        : '';\n\n    return `\n      <div style=\"${this.styleToString(styles.content)}\">\n        <label style=\"${this.styleToString(styles.label)}\" for=\"inner-lens-description\">\n          ${this.escapeHtml(this.config.dialogDescription ?? t.dialogDescription)}\n        </label>\n        <textarea\n          id=\"inner-lens-description\"\n          placeholder=\"${this.escapeHtml(t.placeholder)}\"\n          style=\"${this.styleToString(styles.textarea)}\"\n        >${this.escapeHtml(this.description)}</textarea>\n\n        ${logsHtml}\n\n        <div style=\"${this.styleToString(styles.privacyNotice)}\">\n          ${this.escapeHtml(t.privacyNotice)}\n        </div>\n\n        ${errorHtml}\n      </div>\n\n      <div style=\"${this.styleToString(styles.footer)}\">\n        <button\n          type=\"button\"\n          id=\"inner-lens-cancel\"\n          style=\"${this.styleToString(styles.cancelButton)}\"\n        >\n          ${this.escapeHtml(this.config.cancelText ?? t.cancelText)}\n        </button>\n        <button\n          type=\"button\"\n          id=\"inner-lens-submit\"\n          ${this.submissionState === 'submitting' ? 'disabled' : ''}\n          style=\"${this.styleToString({\n            ...styles.submitButton,\n            ...(this.submissionState === 'submitting' ? styles.submitButtonDisabled : {}),\n          })}\"\n        >\n          ${\n            this.submissionState === 'submitting'\n              ? `<span style=\"display: flex; align-items: center; gap: 8px; justify-content: center;\" role=\"status\" aria-live=\"polite\">\n                  <span class=\"inner-lens-spinner\" aria-hidden=\"true\"></span>\n                  ${this.escapeHtml(t.submitting)}\n                </span>`\n              : this.escapeHtml(this.config.submitText ?? t.submitText)\n          }\n        </button>\n      </div>\n    `;\n  }\n\n  private renderLogs(styles: ReturnType<typeof createStyles>): string {\n    const t = this.getTexts();\n    const recentLogs = this.logs.slice(-10);\n    const logsHtml = recentLogs\n      .map((log) => {\n        const levelStyle =\n          log.level === 'error'\n            ? styles.logError\n            : log.level === 'warn'\n              ? styles.logWarn\n              : {};\n        const message = this.escapeHtml(log.message.slice(0, 100));\n        const truncated = log.message.length > 100 ? '...' : '';\n        return `\n          <div style=\"${this.styleToString({ ...styles.logEntry, ...levelStyle })}\">\n            [${log.level.toUpperCase()}] ${message}${truncated}\n          </div>\n        `;\n      })\n      .join('');\n\n    return `\n      <div style=\"${this.styleToString(styles.logPreview)}\">\n        <div style=\"${this.styleToString(styles.logPreviewHeader)}\">\n          <span style=\"${this.styleToString(styles.logPreviewTitle)}\">${this.escapeHtml(t.capturedLogs)}</span>\n          <span style=\"${this.styleToString(styles.logCount)}\">\n            ${this.logs.length} ${this.logs.length === 1 ? t.entry : t.entries}\n          </span>\n        </div>\n        <div style=\"${this.styleToString(styles.logList)}\">\n          ${logsHtml}\n        </div>\n      </div>\n    `;\n  }\n\n  private attachEventListeners(styles: ReturnType<typeof createStyles>): void {\n    const overlay = this.widgetRoot?.querySelector('#inner-lens-overlay');\n    const dialog = this.widgetRoot?.querySelector('#inner-lens-dialog');\n    const closeBtn = this.widgetRoot?.querySelector('#inner-lens-close') as HTMLElement;\n    const cancelBtn = this.widgetRoot?.querySelector('#inner-lens-cancel');\n    const submitBtn = this.widgetRoot?.querySelector('#inner-lens-submit');\n    const textarea = this.widgetRoot?.querySelector(\n      '#inner-lens-description'\n    ) as HTMLTextAreaElement;\n    const trigger = this.widgetRoot?.querySelector('#inner-lens-trigger');\n\n    overlay?.addEventListener('click', (e) => {\n      if (e.target === overlay) this.close();\n    });\n\n    dialog?.addEventListener('click', (e) => e.stopPropagation());\n    closeBtn?.addEventListener('click', () => this.close());\n    closeBtn?.addEventListener('mouseenter', () => {\n      if (closeBtn) closeBtn.style.backgroundColor = '#f3f4f6';\n    });\n    closeBtn?.addEventListener('mouseleave', () => {\n      if (closeBtn) closeBtn.style.backgroundColor = 'transparent';\n    });\n    cancelBtn?.addEventListener('click', () => this.close());\n    submitBtn?.addEventListener('click', () => this.submit());\n    trigger?.addEventListener('click', () => this.open());\n\n    textarea?.addEventListener('input', (e) => {\n      this.description = (e.target as HTMLTextAreaElement).value;\n    });\n\n    textarea?.addEventListener('focus', () => {\n      if (textarea) {\n        textarea.style.borderColor = this.config.styles?.buttonColor ?? '#6366f1';\n        textarea.style.boxShadow = `0 0 0 3px ${this.config.styles?.buttonColor ?? '#6366f1'}20`;\n      }\n    });\n\n    textarea?.addEventListener('blur', () => {\n      if (textarea) {\n        textarea.style.borderColor = '#d1d5db';\n        textarea.style.boxShadow = 'none';\n      }\n    });\n\n    // Focus textarea after render\n    setTimeout(() => textarea?.focus(), 100);\n  }\n\n  private async submit(): Promise<void> {\n    if (!this.description.trim()) {\n      this.errorMessage = 'Please provide a description of the issue.';\n      this.render();\n      return;\n    }\n\n    this.submissionState = 'submitting';\n    this.errorMessage = null;\n    this.render();\n\n    try {\n      // Parse owner/repo from repository string (e.g., \"owner/repo\")\n      const [parsedOwner, parsedRepo] = (this.config.repository || '').split('/');\n      const owner = parsedOwner ?? '';\n      const repo = parsedRepo ?? '';\n\n      // Validate repository for hosted mode\n      if (this.config.endpoint === HOSTED_API_ENDPOINT && (!owner || !repo)) {\n        this.submissionState = 'error';\n        this.errorMessage =\n          'Repository not configured. Please set the repository option (e.g., \"owner/repo\").';\n        this.render();\n        return;\n      }\n\n      // Prepare session replay data if available\n      let sessionReplayBase64: string | undefined;\n      if (this.sessionReplayData && this.sessionReplayData.events.length > 0) {\n        try {\n          const compressed = await compressReplayData(this.sessionReplayData);\n          const buffer = await compressed.arrayBuffer();\n          sessionReplayBase64 = btoa(\n            String.fromCharCode(...new Uint8Array(buffer))\n          );\n        } catch (error) {\n          // Fallback to uncompressed if compression fails\n          console.warn('[inner-lens] Session replay compression failed, using uncompressed:', error);\n          sessionReplayBase64 = btoa(\n            JSON.stringify(this.sessionReplayData.events)\n          );\n        }\n      }\n\n      const payload: BugReportPayload = {\n        description: this.config.maskSensitiveData\n          ? maskSensitiveData(this.description)\n          : this.description,\n        logs: this.logs,\n        url: typeof window !== 'undefined' ? window.location.href : '',\n        userAgent: typeof navigator !== 'undefined' ? navigator.userAgent : '',\n        timestamp: Date.now(),\n        // Centralized mode: send owner/repo directly\n        owner: owner || undefined,\n        repo: repo || undefined,\n        // Extended context\n        userActions: this.userActions.length > 0 ? this.userActions : undefined,\n        navigations: this.navigations.length > 0 ? this.navigations : undefined,\n        performance: this.performance ?? undefined,\n        sessionReplay: sessionReplayBase64,\n        pageContext: this.pageContext ?? undefined,\n        // Legacy: keep metadata for backwards compatibility\n        metadata: {\n          repository: this.config.repository,\n          labels: this.config.labels,\n        },\n      };\n\n      const response = await fetch(this.config.endpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(payload),\n      });\n\n      const data = (await response.json()) as BugReportResponse;\n\n      if (!response.ok) {\n        const texts = this.getTexts();\n        if (data.errorCode === 'DAILY_LIMIT_EXCEEDED') {\n          throw new Error(texts.dailyLimitExceeded);\n        }\n        if (data.errorCode === 'RATE_LIMIT_EXCEEDED') {\n          throw new Error(texts.rateLimitExceeded);\n        }\n        throw new Error(\n          data.message || `Failed to submit report (${response.status})`\n        );\n      }\n\n      this.submissionState = 'success';\n      this.issueUrl = data.issueUrl ?? null;\n\n      // Clear all captured data after successful submission\n      clearCapturedLogs();\n      if (this.config.captureUserActions) {\n        clearCapturedUserActions();\n      }\n      if (this.config.captureNavigation) {\n        clearCapturedNavigations();\n      }\n      if (this.config.captureSessionReplay) {\n        // Stop and restart session replay for fresh recording\n        stopSessionReplay();\n        startSessionReplay({ maskInputs: true }).catch(() => {});\n      }\n\n      this.config.onSuccess?.(data.issueUrl);\n    } catch (error) {\n      const err = error instanceof Error ? error : new Error(String(error));\n      this.submissionState = 'error';\n      this.errorMessage = err.message;\n      this.config.onError?.(err);\n    }\n\n    this.render();\n  }\n\n  private styleToString(style: Record<string, string | number | undefined>): string {\n    return Object.entries(style)\n      .filter(([, value]) => value !== undefined)\n      .map(([key, value]) => {\n        const cssKey = key.replace(/([A-Z])/g, '-$1').toLowerCase();\n        return `${cssKey}: ${value}`;\n      })\n      .join('; ');\n  }\n\n  private escapeHtml(text: string): string {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n\n  private getBugIcon(size: number = 24): string {\n    return `\n      <svg width=\"${size}\" height=\"${size}\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n        <path d=\"M8 2l1.88 1.88M14.12 3.88L16 2M9 7.13v-1a3 3 0 1 1 6 0v1\" />\n        <path d=\"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6Z\" />\n        <path d=\"M12 20v-9M6.53 9C4.6 8.8 3 7.1 3 5M6 13H2M3 21c0-2.1 1.7-3.9 3.8-4M20.97 5c0 2.1-1.6 3.8-3.5 4M22 13h-4M17.2 17c2.1.1 3.8 1.9 3.8 4\" />\n      </svg>\n    `;\n  }\n\n  private getCloseIcon(): string {\n    return `\n      <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n        <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n        <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n      </svg>\n    `;\n  }\n\n  private getCheckIcon(): string {\n    return `\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n        <polyline points=\"20 6 9 17 4 12\" />\n      </svg>\n    `;\n  }\n}\n","/**\n * inner-lens Vanilla JS Module\n * Use this for plain JavaScript/TypeScript projects without frameworks\n *\n * @packageDocumentation\n *\n * @example\n * ```html\n * <script type=\"module\">\n *   import { InnerLens } from 'inner-lens/vanilla';\n *\n *   // Hosted mode (default) - just specify repository\n *   const widget = new InnerLens({\n *     repository: 'owner/repo',\n *   });\n *\n *   // Self-hosted mode - specify custom endpoint\n *   // const widget = new InnerLens({\n *   //   endpoint: '/api/bug-report',\n *   //   repository: 'owner/repo',\n *   // });\n *\n *   widget.mount();\n * </script>\n * ```\n */\n\nexport { InnerLensCore as InnerLens } from './core/InnerLensCore';\nexport type { InnerLensCoreConfig as InnerLensConfig } from './core/InnerLensCore';\n\n// Re-export utilities\nexport * from './utils/masking';\nexport * from './utils/log-capture';\nexport * from './types';\n\n// Auto-init support for script tag usage\ndeclare global {\n  interface Window {\n    InnerLens?: typeof import('./core/InnerLensCore').InnerLensCore;\n    innerLensConfig?: import('./core/InnerLensCore').InnerLensCoreConfig;\n  }\n}\n\n// Auto-initialize if config is present on window\nif (typeof window !== 'undefined') {\n  // Make InnerLens available globally\n  import('./core/InnerLensCore').then(({ InnerLensCore }) => {\n    window.InnerLens = InnerLensCore;\n\n    // Auto-mount if config exists\n    if (window.innerLensConfig) {\n      const instance = new InnerLensCore(window.innerLensConfig);\n      instance.mount();\n    }\n  });\n}\n"]}